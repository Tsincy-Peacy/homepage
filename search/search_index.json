{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\u6b22\u8fce\u6765\u5230\u6211\u7684\u4e2a\u4eba\u4e3b\u9875","text":""},{"location":"#_2","title":"\u4f11\u95f2\u4e00\u4e0b","text":"<ul> <li>\u98de\u732b\u5386\u9669\u8bb0(made by my sister)</li> </ul>"},{"location":"#_3","title":"\u53cb\u60c5\u5de5\u5177","text":"<ul> <li>\u8ba1\u7b97\u673a\u672f\u8bed\u5e93</li> </ul>"},{"location":"#_4","title":"\u4fbf\u6377\u8d44\u6e90","text":"<ul> <li>\u6587\u4ef6\u5bc6\u7801\u6062\u590d\u5de5\u5177</li> <li>CH341\u4e32\u53e3\u9a71\u52a8</li> <li>\u7eaf\u51c0Flash</li> <li>LC-3\u6a21\u62df\u5668</li> <li>\u64cd\u4f5c\u7cfb\u7edf\u5f15\u5bfc\u76d8\u5236\u4f5c\u5de5\u5177</li> </ul>"},{"location":"about/","title":"\u4e2a\u4eba\u7b80\u4ecb","text":"<p>\u5f20\u4e49\uff0c\u7b14\u540d\u5f20\u9038\u5b89</p>"},{"location":"about/#_2","title":"\u7c4d\u8d2f","text":"<ul> <li>\u5c71\u897f\u7701\u5ffb\u5dde\u5e02</li> </ul>"},{"location":"about/#_3","title":"\u5b66\u4e60\u7ecf\u5386","text":"<ul> <li>\u5143\u535a\u4e2d\u5b66</li> <li> <p>\u6714\u5dde\u5e02\u6714\u57ce\u533a\u4e00\u4e2d</p> </li> <li> <p>\u4e2d\u56fd\u79d1\u5b66\u6280\u672f\u5927\u5b66\uff0c\u8ba1\u7b97\u673a\u5b66\u9662\u5927\u56db\u5728\u8bfb</p> </li> </ul>"},{"location":"about/#_4","title":"\u83b7\u5f97\u5956\u9879","text":"<ul> <li>2025\u5e74\u5168\u56fd\u5927\u5b66\u751f\u667a\u80fd\u8f66\u7ade\u8d5b\u5b89\u5fbd\u8d5b\u533a\u6c14\u57ab\u8d8a\u91ce\u7ec4\u4e8c\u7b49\u5956</li> <li>2025\u5e74\u5168\u56fd\u8ba1\u7b97\u673a\u6559\u5b66\u6848\u4f8b\u5927\u8d5b\u4e8c\u7b49\u5956</li> <li>2024\u5e74RoboGame\u4e8c\u7b49\u5956</li> <li>2024\u5e74\u4f18\u79c0\u5b66\u751f\u5956\u94f6\u5956</li> </ul>"},{"location":"glossary/","title":"\u672f\u8bed\u5e93","text":"<p>\u672c\u672f\u8bed\u5e93\u65e8\u5728\u4e3a\u672c\u4eba\u548c\u8ba1\u7b97\u673a\u9886\u57df\u7684\u540c\u884c\u63d0\u4f9b\u4fbf\u6377\u7684\u672f\u8bed\u67e5\u8be2\u670d\u52a1\u3002</p> \u672f\u8bed \u5168\u79f0 \u4e2d\u6587 AIoT Artificial Intelligence Internet of Things \u4eba\u5de5\u667a\u80fd\u7269\u8054\u7f51 AoA Angle of Arrival \u5230\u8fbe\u89d2 AoD Angle of Departure \u51fa\u53d1\u89d2 AUC Area Under Curve \u66f2\u7ebf\u4e0b\u9762\u79ef BP Back Propagation \u53cd\u5411\u4f20\u64ad\u7b97\u6cd5 CNN Convolution Neural Network \u5377\u79ef\u795e\u7ecf\u7f51\u7edc CSI Channel State Infomation \u4fe1\u9053\u72b6\u6001\u4fe1\u606f DFS Doppler Frequency Shift \u591a\u666e\u52d2\u9891\u79fb FOIL First Order Inductive Learner \u4e00\u9636\u89c4\u5219\u5b66\u4e60\u7b97\u6cd5 GPS General Problem Solver \u901a\u7528\u95ee\u9898\u6c42\u89e3\u5668 GPS Global Positioning System \u5168\u7403\u5b9a\u4f4d\u7cfb\u7edf GRU Gate Recurrent Unit \u95e8\u63a7\u5faa\u73af\u5355\u5143 ILP Inductive Logic Programming \u5f52\u7eb3\u903b\u8f91\u7f16\u7a0b KNN K-Nearest Neighbor K\u90bb\u8fd1\u7b97\u6cd5 LoS Line of Sight \u89c6\u8ddd MLP Multi-Layer Perceptron \u591a\u5c42\u611f\u77e5\u673a P-R Precision-Recall \u7cbe\u786e\u7387-\u53ec\u56de\u7387\u66f2\u7ebf PRA Path Ranking Algorithm \u8def\u5f84\u6392\u5e8f\u63a8\u7406\u7b97\u6cd5 RF Radio Frequency \u5c04\u9891 RFID Radio Frequency Identification \u5c04\u9891\u8bc6\u522b RNN Recurrent Neural Network \u5faa\u73af\u795e\u7ecf\u7f51\u7edc ROC Reciever Operating Characteristic \u53d7\u8bd5\u8005\u5de5\u4f5c\u7279\u5f81\u66f2\u7ebf RSSI Recieved Signal Strength Indicator \u63a5\u6536\u4fe1\u53f7\u5f3a\u5ea6\u6307\u793a\u5668 SAP Systems Applications and Products in Data Processing \u601d\u7231\u666e\u516c\u53f8 SAR Synthetic Aperture Radar \u5408\u6210\u5b54\u5f84\u96f7\u8fbe STFT Short Time Fourier Transform \u77ed\u65f6\u5085\u91cc\u53f6\u53d8\u6362 SVM Support Vector Machine \u652f\u6301\u5411\u91cf\u673a ToF Time of Flight \u98de\u884c\u65f6\u95f4 TRRS Time-Reversal Resonating Strength \u65f6\u95f4\u53cd\u8f6c\u5171\u632f\u5f3a\u5ea6 <p>\u9875\u9762\u6709\u8bf8\u591a\u8003\u8651\u4e0d\u5468\uff0c\u53cd\u9988\u901a\u9053\u5c06\u4e8e\u7a0d\u540e\u5f00\u53d1\u3002</p>"},{"location":"schedule/","title":"\u5468\u8ba1\u5212","text":""},{"location":"schedule/#2025-11-30","title":"2025 - 11 - 30\uff08\u9884\u5b9a\u4e49\uff09","text":""},{"location":"schedule/#_2","title":"\u52a9\u6559\u5de5\u4f5c","text":"<ul> <li> \u51c6\u5907\u4e60\u9898\u8bfe</li> </ul>"},{"location":"schedule/#_3","title":"\u8bfe\u7a0b\u5b66\u4e60","text":"<ul> <li> <p> CAD \u5236\u56fe\u6240\u6709\u4f5c\u4e1a</p> </li> <li> <p> \u91cf\u5b50\u7269\u7406\u4e0e\u673a\u5668\u5b66\u4e60 Lab1</p> </li> </ul>"},{"location":"schedule/#_4","title":"\u6bd5\u4e1a\u8bbe\u8ba1","text":"<ul> <li> \u9605\u8bfb 2 \u7bc7\u67d4\u6027\u529b\u89e6\u4f20\u611f\u5668\u8bba\u6587</li> </ul>"},{"location":"schedule/#_5","title":"\u5b9e\u9a8c\u5ba4","text":"<ul> <li> \u63a8\u8fdb\u9879\u76ee\u9a8c\u8bc1</li> </ul>"},{"location":"schedule/#2025-11-23","title":"2025 - 11 - 23","text":"<p>\u7ed3\u8bed\uff1a\u76ee\u6807\u8f83\u591a\uff0c\u672a\u80fd\u6309\u65f6\u5b8c\u6210\u3002</p>"},{"location":"schedule/#_6","title":"\u529e\u516c\u52a9\u624b","text":"<ul> <li> <p> \u534e\u4e3a\u667a\u80fd\u57fa\u5ea7\u9879\u76ee\u7533\u62a5</p> </li> <li> <p> \u7701\u7ea7\u6559\u6539\u8d28\u91cf\u9879\u76ee</p> </li> </ul>"},{"location":"schedule/#_7","title":"\u8bfe\u7a0b\u5b66\u4e60","text":"<ul> <li> <p> CAD \u5236\u56fe\u6240\u6709\u4f5c\u4e1a\uff08\u5b9e\u9645\u5b8c\u62106/8\uff09</p> </li> <li> <p> \u91cf\u5b50\u529b\u5b66\u6240\u6709\u4f5c\u4e1a</p> </li> </ul>"},{"location":"schedule/#_8","title":"\u52a9\u6559\u5de5\u4f5c","text":"<ul> <li> \u6279\u6539\u5c0f\u6d4b\u9898\u76ee</li> </ul>"},{"location":"schedule/#_9","title":"\u82f1\u8bed","text":"<ul> <li> Puss in Boots \u5168\u6587\u7cbe\u901a</li> </ul>"},{"location":"schedule/#_10","title":"\u6bd5\u4e1a\u8bbe\u8ba1","text":"<ul> <li> <p> \u5b8c\u6210\u4e24\u4e2a\u4f20\u611f\u5668\u7684\u8bad\u7ec3</p> </li> <li> <p> \u8d2d\u4e70 PDMS \u56fa\u5316\u5242</p> </li> <li> <p> \u62a5\u9500</p> </li> <li> <p> \u66f4\u53ef\u9760\u7684\u63a5\u7ebf\u7aef\u5b50\uff08XH2.56\uff09</p> </li> </ul>"},{"location":"schedule/#_11","title":"\u6e29\u6545\u77e5\u65b0","text":"<ul> <li> \u7ebf\u6027\u4ee3\u6570</li> </ul>"},{"location":"schedule/#2025-11-16","title":"2025 - 11 - 16","text":"<p>\u7ed3\u8bed\uff1a\u987a\u5229\u5b8c\u6210</p>"},{"location":"schedule/#_12","title":"\u52a9\u6559\u5de5\u4f5c","text":"<ul> <li> <p> \u5b8c\u6210\u8bfe\u7a0b\u4e3b\u9875\u7684\u7ef4\u62a4</p> <ul> <li> <p> \u8bfe\u4ef6\u4e0a\u4f20</p> </li> <li> <p> \u4e60\u9898\u8bfe\u8bb2\u4e49\u4e0a\u4f20</p> </li> <li> <p> Lab2 ~ Lab4 \u53c2\u8003\u7b54\u6848</p> </li> </ul> </li> <li> <p> \u6279\u6539\u79ef\u6512\u7684\u4f5c\u4e1a</p> <ul> <li> <p> \u4e0a\u673a\u4f5c\u4e1a</p> </li> <li> <p> \u6a21\u62df\u8003\u8bd5</p> </li> </ul> </li> <li> <p> \u5bfb\u627e 10 \u9053\u7d20\u6750\u9898\u76ee</p> </li> </ul>"},{"location":"schedule/#_13","title":"\u4f53\u6d4b","text":"<ul> <li> \u5b8c\u6210\u4f53\u6d4b</li> </ul>"},{"location":"schedule/#_14","title":"\u6bd5\u4e1a\u8bbe\u8ba1","text":"<ul> <li> \u5b8c\u6210\u6db2\u5c01\u51dd\u56fa\u6d4b\u8bd5</li> </ul>"},{"location":"schedule/#_15","title":"\u82f1\u8bed","text":"<ul> <li> Puss in Boots \u4e00\u904d</li> </ul>"},{"location":"schedule/#_16","title":"\u5907\u8bfe","text":"<ul> <li> \u51c6\u5907\u81f3\u5c11 4 h \u7684\u6c47\u7f16\u8bfe\u7a0b</li> </ul>"},{"location":"schedule/#_17","title":"\u73a9\u673a\u6280\u5de7","text":"<ul> <li> \u63a2\u7d22\u591a\u8bbe\u5907\u534f\u540c\u5de5\u4f5c</li> </ul>"},{"location":"support/","title":"Impedance Sensor","text":""},{"location":"support/#environment","title":"Environment","text":"<pre><code>pip install pyserial\n</code></pre>"},{"location":"support/#hardware","title":"Hardware","text":"<p>Your PC should have two USB ports, or use Docking station.</p> <ol> <li>Connect AD5933 and Digital Process Board with I<sup>2</sup>C wires.</li> <li>Connect STM32F103C8T6 and MUX with Dupont wires following the rules:<ul> <li>PA0 - TEN</li> <li>PA1~4 - TS0~3</li> <li>PA5 - REN</li> <li>PA6~7 + PB0~1 - RS0~3</li> <li>Don't forget the VCC and GND</li> </ul> </li> <li>Make the \u200balligator clips catch the corresponding T/R SIG port.</li> <li>Connect Digital Process Board and STM32F103C8T6 to PC with USB wires.</li> </ol>"},{"location":"support/#test","title":"Test","text":"<p>Download XCOM and open it.</p> <p>Connect the the GPIO ports TChannel2 and RChannel6 with a Dupont wire.</p> <p>Make sure that your configuration is as the same as mine except for the COM port:</p> <p></p> <p>Select the correct COM Port for STM32F103C8T6. Here, COM5 is the corresponding port. Maybe yours is different from mine.</p> <p>Send '0206' to your device. Then you will receive '2, 6':</p> <p></p> <p>Switch to another COM port for Digital Process Board, for me it's COM6. Send 'read' to your device. If you get the impedance roughly equal to 5K, you succeed!</p> <p></p>"},{"location":"support/#develop","title":"Develop","text":"<p>Code below shows how to use pyserial to make a request for getting impedance infomation. The response consists of three lines.</p> <p>For how to send MUX switch command, just refer to Test section, you can ignore the response if everything is OK, and it just consists of one line: 'Tport, Rport'.</p> <pre><code>import serial\nimport time\n\nser = serial.Serial('COM6', 9600)\n\ntry:\n    while True:\n        time.sleep(1)\n        ser.write(b'read')\n        for _ in range(3):\n            data = ser.readline().decode('utf-8').strip()\n            print(data)\n\nexcept Exception as e:\n    print(f\"Error: {e}\")\n\nfinally:\n    ser.close()\n</code></pre>"},{"location":"lectures/lecture01/","title":"\u6c47\u7f16\u8bed\u8a00\u7b2c\u4e00\u8bb2","text":""},{"location":"lectures/lecture01/#_2","title":"\u7b2c\u4e00\u7ae0\uff1a\u57fa\u7840\u77e5\u8bc6","text":""},{"location":"lectures/lecture01/#_3","title":"\u4e3a\u4ec0\u4e48\u8981\u8bbe\u8ba1\u6c47\u7f16\u8bed\u8a00\uff0c\u800c\u4e0d\u662f\u7528\u673a\u5668\u7801\u7f16\u7a0b\uff1f","text":"<p>\u673a\u5668\u7801\u5c31\u662f\u4e00\u58060/1\u4e32\uff0c\u6781\u96be\u8fa8\u8bc6\uff0c\u4e14\u53d1\u751f\u9519\u8bef\u4eba\u773c\u5f88\u96be\u627e\u5230\u95ee\u9898\u3002\u6bd4\u5982\u627e\u51fa\u8fd9\u4e24\u6761\u6307\u4ee4\u7684\u4e0d\u540c\u4e4b\u5904\uff1a</p> <p><code>1001001110010010</code> \u548c <code>1001001100010010</code></p>"},{"location":"lectures/lecture01/#_4","title":"\u6c47\u7f16\u8bed\u8a00\u7684\u4ea7\u751f","text":"<p>\u6bcf\u6761\u6307\u4ee4\u6709\u7279\u5b9a\u7684\u4f5c\u7528\uff0c\u6bd4\u5982\u5c06\u5bc4\u5b58\u5668 <code>BX</code> \u7684\u5185\u5bb9\u9001\u5230 <code>AX</code>\uff0c\u53ef\u4ee5\u8bb0\u4e3a <code>mov ax, bx</code>\uff0c\u4e00\u76ee\u4e86\u7136\u3002</p>"},{"location":"lectures/lecture01/#_5","title":"\u6c47\u7f16\u8bed\u8a00\u7684\u7ec4\u6210","text":"<ul> <li> <p>\u6c47\u7f16\u6307\u4ee4\uff1a\u4e00\u4e2a\u6c47\u7f16\u6307\u4ee4\u5bf9\u5e94\u4e00\u6761\u673a\u5668\u7801\u3002</p> </li> <li> <p>\u4f2a\u6307\u4ee4\uff1a\u4e00\u4e2a\u4f2a\u6307\u4ee4\u662f\u7531\u591a\u6761\u6c47\u7f16\u6307\u4ee4\u7ec4\u6210\uff0c\u8fd9\u4e3b\u8981\u662f\u4e3a\u4e86\u4fbf\u4e8e\u4f7f\u7528\uff0c\u5728\u6267\u884c\u65f6\u5148\u7531\u7f16\u8bd1\u5668\u5c55\u5f00\u4e3a\u591a\u6761\u6c47\u7f16\u6307\u4ee4\u3002</p> </li> <li> <p>\u5176\u4ed6\u7b26\u53f7\uff1a+\u3001-\u3001*\u3001/ \u7b49\u3002</p> </li> </ul>"},{"location":"lectures/lecture01/#_6","title":"\u5b58\u50a8\u5668\u7684\u4f5c\u7528","text":"<p>CPU \u4e0e\u5b58\u50a8\u5668\u7684\u5173\u7cfb\uff0c\u7c7b\u4f3c\u4e8e\u5927\u8111\u4e0e\u8bb0\u5fc6\u7684\u5173\u7cfb\uff0cCPU \u8d1f\u8d23\u6570\u636e\u7684\u63a7\u5236\u548c\u8fd0\u7b97\uff0c\u5b58\u50a8\u5668\u8d1f\u8d23\u6570\u636e\u7684\u5b58\u653e\u548c\u8bfb\u53d6\u3002</p>"},{"location":"lectures/lecture01/#_7","title":"\u6307\u4ee4\u548c\u6570\u636e","text":"<p>\u5728 16 \u4f4d 8086 \u5904\u7406\u5668\u4e2d\uff0c\u6307\u4ee4\u548c\u6570\u636e\u90fd\u662f 16 \u4f4d\uff0c\u90a3\u4e48 CPU \u5982\u4f55\u533a\u5206\u4e00\u6bb5\u6570\u5b57\u662f\u6307\u4ee4\u8fd8\u662f\u6570\u636e\uff1f\u4e8b\u5b9e\u4e0a\uff0c\u5982\u4f55\u770b\u5f85\u53d6\u51b3\u4e8e\u4f60\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u6bd4\u5982 <code>1000100111011000</code> \u53ef\u4ee5\u662f\u6307\u4ee4 <code>mov ax, bx</code>\uff08\u6307\u4ee4\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f <code>89D8H</code>\uff08\u6570\u636e\uff09\u3002</p> <p>\u6307\u4ee4\u548c\u6570\u636e\u90fd\u5b58\u653e\u4e8e\u5b58\u50a8\u5668\u4e2d\u3002</p>"},{"location":"lectures/lecture01/#_8","title":"\u5b58\u50a8\u5355\u5143","text":"<p>\u5bf9\u4e8e 16 \u4f4d\u7684 8086 \u5904\u7406\u5668\u800c\u8a00\uff0c\u5176\u5730\u5740\u7ebf\u4e3a 20 \u4f4d\uff0c\u5bf9\u5e94 \\(2^{20}\\) \u4e2a\u5730\u5740\uff080 ~ \\(2^{20}-1\\)\uff09\uff0c\u6bcf\u4e2a\u5730\u5740\u5bf9\u5e94\u4e00\u4e2a\u5b58\u50a8\u5355\u5143\uff0c\u6bcf\u4e2a\u5b58\u50a8\u5355\u5143\u662f\u4e00\u4e2a 8 bit \u7684\u5b57\u8282\uff0c\u5373\u8fd9\u6837\u7684\u5b58\u50a8\u5668\u53ef\u4ee5\u5b58\u653e \\(2^{20}\\) \u4e2a Byte\u3002</p> <p>\u901a\u5e38\u4f7f\u7528 B \u6765\u4ee3\u66ff Byte\uff0c\u5185\u5b58\u6362\u7b97\u5173\u7cfb\uff1a</p> <p>1 KB = 1024 B</p> <p>1 MB = 1024 KB</p> <p>1 GB = 1024 MB</p> <p>1 TB = 1024 GB</p> <p>PS\uff1a\u5b57\u662f\u5904\u7406\u5668\u80fd\u591f\u5904\u7406\u7684\u6700\u5927\u6570\u636e\u5355\u4f4d\uff0c\u5bf9\u4e8e 8086\uff0c\u4e00\u4e2a\u5b57\u8868\u793a\u4e24\u4e2a\u5b57\u8282\uff0c\u5373 1 W = 2 B\u3002</p>"},{"location":"lectures/lecture01/#_9","title":"\u603b\u7ebf","text":"<p>\u603b\u7ebf\u5206\u4e3a\u6570\u636e\u603b\u7ebf\u3001\u5730\u5740\u603b\u7ebf\u548c\u63a7\u5236\u603b\u7ebf\uff0c\u4e86\u89e3\u5373\u53ef\uff0c\u5bf9\u4e8e\u6c47\u7f16\u8bed\u8a00\u7684\u5b66\u4e60\u6ca1\u6709\u592a\u591a\u5f71\u54cd\u3002CPU\u3001\u5b58\u50a8\u5668\u548c\u5916\u754c\u8bbe\u5907\u901a\u8fc7\u603b\u7ebf\u4ea4\u6362\u6570\u636e\u3002</p> <p>\u8fd9\u4e9b\u8bbe\u5907\u5728\u7269\u7406\u4e0a\u662f\u72ec\u7acb\u7684\uff0c\u4f46\u5bf9\u4e8e CPU \u800c\u8a00\uff0c\u5b83\u4eec\u53ea\u662f\u5bf9\u5e94\u4e0d\u540c\u7684\u603b\u7ebf\u5730\u5740\uff0c\u4f8b\u5982 <code>00000</code> ~ <code>9FFFF</code> \u5bf9\u5e94 RAM\uff0c<code>A0000</code> ~ <code>BFFFF</code> \u5bf9\u5e94\u663e\u5b58\uff0c<code>C0000</code> ~ <code>FFFFF</code> \u5bf9\u5e94 ROM</p>"},{"location":"lectures/lecture01/#_10","title":"\u7b2c\u4e8c\u7ae0\uff1a\u5bc4\u5b58\u5668","text":""},{"location":"lectures/lecture01/#_11","title":"\u4ec0\u4e48\u662f\u5bc4\u5b58\u5668\uff1f","text":"<p>\u987e\u540d\u601d\u4e49\uff0c\u5bc4\u5b58\u5668\u5c31\u662f\u5bc4\u5b58\u6570\u636e\u7684\u5668\u4ef6\uff0c\u5b83\u662f CPU \u5185\u90e8\u7684\u90e8\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u6307\u4ee4\u5c06\u6570\u636e\u5b58\u653e\u5728\u5bc4\u5b58\u5668\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6307\u4ee4\u8bfb\u53d6\u5bc4\u5b58\u5668\u4e2d\u5b58\u653e\u7684\u6570\u636e\u3002</p> <p>16 \u4f4d 8086 \u5904\u7406\u5668\u7684\u6240\u6709\u5bc4\u5b58\u5668\u90fd\u662f 16 \u4f4d\uff0c\u5373\u4e00\u4e2a\u5b57\u3002</p>"},{"location":"lectures/lecture01/#_12","title":"\u901a\u7528\u5bc4\u5b58\u5668","text":"<p><code>AX</code>\u3001<code>BX</code>\u3001<code>CX</code>\u3001<code>DX</code> \u8fd9\u56db\u4e2a\u5bc4\u5b58\u5668\u901a\u5e38\u7528\u6765\u5b58\u653e\u4e00\u822c\u6027\u7684\u6570\u636e\uff0c\u88ab\u79f0\u4e3a\u901a\u7528\u5bc4\u5b58\u5668\u3002\u8fd9\u56db\u4e2a\u5bc4\u5b58\u5668\u90fd\u53ef\u4ee5\u5206\u4e3a\u9ad8\u4f4d\u5bc4\u5b58\u5668\u548c\u4f4e\u4f4d\u5bc4\u5b58\u5668\uff0c\u5982 <code>AX</code> \u5206\u4e3a <code>AH</code> \u548c <code>AL</code>\u3002</p>"},{"location":"lectures/lecture01/#_13","title":"\u51e0\u6761\u6c47\u7f16\u6307\u4ee4","text":"<p><code>mov ax, 18</code>\uff1a<code>AX</code> = 18\u3002</p> <p><code>mov ah, 78</code>\uff1a<code>AH</code> = 78\uff08\u601d\u8003\u548c <code>AX</code> \u7684\u533a\u522b\uff09\u3002</p> <p><code>add ax, 7</code>\uff1a<code>AX</code> = <code>AX</code> + 7\u3002</p> <p><code>sub bx, [9]</code>\uff1a<code>BX</code> = <code>BX</code> - <code>memory[DS:9]</code>\u3002</p> <p><code>mov ax, bx</code>\uff1a<code>BX</code> = <code>AX</code>\u3002</p> <p><code>add ax, bx</code>\uff1a<code>AX</code> = <code>AX</code> + <code>BX</code>\u3002</p>"},{"location":"lectures/lecture01/#8086-cpu","title":"8086 CPU \u7ed9\u51fa\u7269\u7406\u5730\u5740\u7684\u65b9\u6cd5","text":"<p>\u6211\u4eec\u77e5\u9053\uff0c8086 \u7684\u5bc4\u5b58\u5668\u662f 16 \u4f4d\uff0c\u800c\u5730\u5740\u603b\u7ebf\u4e3a 20 \u4f4d\uff0c\u5982\u4f55\u7528 16 \u4f4d\u7684\u5bc4\u5b58\u5668\u7ed9\u51fa 20 \u4f4d\u7684\u5730\u5740\u5462\uff1f\u7b54\u6848\u662f\u4f7f\u7528\u4e24\u4e2a\u5bc4\u5b58\u5668\u3002\u7b2c\u4e00\u4e2a\u5bc4\u5b58\u5668\u7ed9\u51fa\u9ad8 16 \u4f4d\uff0c\u79f0\u4e3a\u6bb5\u5730\u5740\uff1b\u7b2c\u4e8c\u4e2a\u5bc4\u5b58\u5668\u7ed9\u51fa\u4f4e 16 \u4f4d\uff0c\u79f0\u4e3a\u504f\u79fb\u5730\u5740\uff0c\u7136\u540e\u5c06\u4ed6\u4eec\u76f8\u52a0\u3002</p> <p>\u4f8b\u5982\uff0c\u4e00\u4e2a\u5bc4\u5b58\u5668\u7ed9\u51fa\u9ad8\u4f4d\u4e3a <code>1230H</code>\uff0c\u53e6\u4e00\u4e2a\u5bc4\u5b58\u5668\u7ed9\u51fa\u4f4e\u4f4d\u4e3a <code>00C8H</code>\uff0c\u7531\u4e8e\u9ad8\u4f4d\u5bc4\u5b58\u5668\u65e0\u6cd5\u8868\u793a\u540e\u56db\u4f4d\uff0c\u6545\u5c06\u5176\u8865\u5145\u4e3a <code>12300H</code>\uff0c\u4e0e\u4f4e\u4f4d\u76f8\u52a0\u5f97\u5230 <code>123C8H</code>\u3002\u8865\u5145\u540e\u56db\u4f4d\u53c8\u53eb\u201c\u5de6\u79fb\u56db\u4f4d\u201d\u3002</p> <p>\u7531\u4e8e\u5de6\u79fb\u56db\u4f4d\u53c8\u53ef\u4ee5\u5199\u6210\u4e58\u4ee5 16\uff0c\u6240\u4ee5\u4e0a\u8ff0\u65b9\u6cd5\u53ef\u4ee5\u5199\u4e3a\uff1a\u7269\u7406\u5730\u5740 = \u6bb5\u5730\u5740 x 16 + \u504f\u79fb\u5730\u5740\u3002</p>"},{"location":"lectures/lecture01/#_14","title":"\u4ec0\u4e48\u662f\u6bb5\uff1f","text":"<p>\u6bb5\u662f\u4e00\u7247\u8fde\u7eed\u7684\u5185\u5b58\uff0c\u8fd9\u662f\u4e00\u4e2a\u4eba\u4e3a\u5b9a\u4e49\uff0c\u800c\u4e0d\u662f\u5185\u5b58\u672c\u6765\u5c31\u662f\u5206\u6bb5\u7684\u3002\u4f8b\u5982\u4f60\u53ef\u4ee5\u89c4\u5b9a <code>10000H ~ 100FFH</code> \u4e3a\u4e00\u4e2a\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u5c06 <code>10000H</code> ~ <code>1007FH</code> \u548c <code>10080H</code> ~ <code>100FFH</code> \u5b9a\u4e49\u4e3a\u4e24\u4e2a\u5206\u6bb5\u3002</p> <p>8086 \u6709\u56db\u4e2a\u6bb5\u5bc4\u5b58\u5668\uff1a<code>CS</code>\u3001<code>DS</code>\u3001<code>SS</code> \u548c <code>ES</code>\u3002</p> <p>\u672c\u6b21\u8bb2\u4e49\u53ea\u5173\u5fc3 <code>CS</code>\u3002</p> <p><code>CS</code> \u662f Code Segment\uff0c<code>IP</code> \u662f Instruction Pointer\uff0c\u5b83\u4eec\u6307\u793a\u4e86\u8bfb\u53d6\u6307\u4ee4\u7684\u5730\u5740\u3002\u5982\u679c <code>CS</code> \u4e2d\u7684\u5185\u5bb9\u4e3a M\uff0c<code>IP</code> \u4e2d\u7684\u5185\u5bb9\u4e3a N\uff0c\u90a3\u4e48 8086 \u5c06\u4ece 16 x M + N \u7684\u5185\u5b58\u5904\u8bfb\u53d6\u4e00\u6761\u6307\u4ee4\u5e76\u6267\u884c\u3002\u6211\u4eec\u5c06\u8fd9\u6837\u7684\u8ba1\u7b97\u5f62\u5f0f\u7b80\u5199\u4e3a <code>M:N</code>\u3002</p>"},{"location":"lectures/lecture01/#cs-ip","title":"\u5982\u4f55\u6539\u53d8 <code>CS</code> \u548c <code>IP</code>\uff1f","text":"<p>\u5f88\u9057\u61be\uff0c\u6211\u4eec\u5e76\u4e0d\u80fd\u50cf\u4f7f\u7528 <code>mov</code> \u4fee\u6539 <code>AX</code> \u90a3\u6837\u6765\u968f\u610f\u4fee\u6539 <code>CS</code> \u548c <code>IP</code>\uff0c8086 \u7981\u6b62\u7528\u6237\u8fd9\u6837\u505a\u3002\u4f46\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e13\u7528\u7684\u6307\u4ee4\u6765\u505a\u5230\u4e00\u5b9a\u7a0b\u5ea6\u7684\u4fee\u6539\uff0c\u8fd9\u91cc\u4ecb\u7ecd\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u6307\u4ee4\uff1a<code>jmp</code>\u3002</p> <p><code>jmp segment:offset</code>\uff1a<code>CS</code> = segment\uff0c<code>IP</code> = offset\u3002</p> <p><code>jmp register</code>\uff1a<code>IP</code> = register\u3002</p> <p>\u4f8b\u5982\uff0c<code>jmp 2AE3:3</code> \u8868\u793a <code>CS</code> = 2AE3\uff0c<code>IP</code> = 3\uff1b<code>jmp ax</code> \u8868\u793a <code>IP</code> = <code>AX</code>\u3002</p> <p>\u601d\u8003\uff1a\u4ee5\u4e0b\u4ee3\u7801\u6bb5\u7684\u6267\u884c\u987a\u5e8f\u3002</p> <pre><code>\u521d\u59cb\u6761\u4ef6\uff1aCS = 2000H\uff0cIP = 0000H\n\n10000H: mov ax, 0123H\n10003H: mov ax, 0000\n10006H: mov bx, ax\n10008H: jmp bx\n...\n20000H: mov ax, 6622H\n20003H: jmp 1000:3\n20008H: mov cx, ax\n</code></pre>"},{"location":"lectures/lecture01/#_15","title":"\u7b2c\u4e09\u7ae0\uff1a\u5185\u5b58\u8bbf\u95ee","text":""},{"location":"lectures/lecture01/#_16","title":"\u5927\u5c3e\u7aef\u548c\u5c0f\u5c3e\u7aef","text":"<p>8086 \u662f\u5c0f\u5c3e\u7aef\u7684\u673a\u5668\u3002\u5c3e\u7aef\u6307\u7684\u662f\u6709\u6548\u6570\u636e\u6700\u4f4e\u4f4d\uff0c\u5927\u5c3e\u7aef\u6307\u7684\u662f\u8fd9\u4e2a\u6700\u4f4e\u4f4d\u5b58\u50a8\u5728\u9ad8\u5730\u5740\uff0c\u5c0f\u5c3e\u7aef\u5219\u662f\u5b58\u50a8\u5728\u4f4e\u5730\u5740\u3002</p> <p>\u4f8b\u5982\u5c06 0123H \u5b58\u50a8\u5728 8086 \u7684\u5185\u5b58\u4e2d\uff0c\u5219\u6309\u7167\u5185\u5b58\u987a\u5e8f\uff0c0 \u5730\u5740\u5904\u5b58\u653e 01H\uff0c1 \u5730\u5740\u5904\u5b58\u653e 23H\u3002</p>"},{"location":"lectures/lecture01/#_17","title":"\u5b58\u53d6\u6570\u636e","text":"<p>\u5728\u7b2c\u4e8c\u7ae0\u4e2d\u6211\u4eec\u8bb2\u89e3\u4e86 8086 \u5982\u4f55\u4f7f\u7528 <code>CS</code> \u548c <code>IP</code> \u8bfb\u53d6\u6307\u4ee4\uff0c\u5f53\u9700\u8981\u64cd\u4f5c\u6570\u636e\u65f6\uff0c8086 \u4f7f\u7528\u7684\u5bc4\u5b58\u5668\u662f <code>DS</code>\uff0c\u504f\u79fb\u5219\u4f7f\u7528 <code>[address]</code>\u3002</p> <p>\u4e0b\u9762\u4e09\u6761\u6307\u4ee4\u5c06 <code>10000H</code>\uff081000:0\uff09\u7684\u6570\u636e\u8bfb\u53d6\u5230 <code>AL</code> \u4e2d\uff1a</p> <pre><code>mov bx, 1000H\nmov ds, bx\nmov al, [0]\n\n; \u6ce8\u610f\uff0c\u4e0d\u80fd\u76f4\u63a5\u628a\u7acb\u5373\u6570\uff081000H\uff09\u76f4\u63a5\u5199\u5165 DS\uff0c\u8fd9\u662f\u786c\u4ef6\u95ee\u9898\n</code></pre>"},{"location":"lectures/lecture01/#_18","title":"\u6808","text":"<p>\u6808\u5c31\u662f\u4e00\u4e2a\u6ce1\u817e\u7247\u7684\u74f6\u5b50\uff0c\u653e\u5165\u6ce1\u817e\u7247\uff0c\u53ea\u80fd\u5012\u7740\u62ff\u51fa\u6765\u3002\u5728 8086 \u5904\u7406\u5668\u4e2d\uff0c\u6808\u6bcf\u6b21\u53ef\u4ee5\u9001\u5165\u4e00\u4e2a\u5b57\uff0c\u6216\u8005\u5f39\u51fa\u4e00\u4e2a\u5b57\u3002\u4e0e\u6307\u4ee4\u6bb5\u548c\u6570\u636e\u6bb5\u7c7b\u4f3c\uff0c\u6808\u4f7f\u7528 <code>SS:SP</code> \u6765\u8868\u793a\u6808\u7684\u4f4d\u7f6e\uff0c<code>SS x 16 + SP</code> \u6307\u5411\u6700\u540e\u4e00\u6b21\u9001\u5165\u7684\u201c\u6ce1\u817e\u7247\u201d\u7684\u4f4d\u7f6e\u3002\u6808\u7531\u5730\u5740\u9ad8\u4f4d\u5411\u5730\u5740\u4f4e\u4f4d\u751f\u957f\uff0c\u4f8b\u5982\uff0c<code>SP</code> \u521d\u59cb\u65f6\u4e3a <code>FFFEH</code>\uff0c\u9001\u5165\u4e00\u4e2a\u5b57\u53d8\u4e3a <code>FFFCH</code>\uff0c\u518d\u9001\u5165\u4e00\u4e2a\u5b57\u53d8\u4e3a <code>FFFAH</code>\uff1b\u6b64\u65f6\uff0c\u5f39\u51fa\u4e00\u4e2a\u5b57\u53d8\u4e3a <code>FFFCH</code>\uff0c\u518d\u5f39\u51fa\u4e00\u4e2a\u5b57\u53d8\u4e3a <code>FFFEH</code>\u3002</p> <p>\u793a\u4f8b\u6307\u4ee4\u4e3a\uff1a</p> <pre><code>mov ax, 0123H ; AX = 0123H\npush ax       ; AX \u7684\u503c\u9001\u5165\u6808: -&gt; 0123H, SP -= 2\nmov bx, 2266H ; BX = 2266H\npush bx       ; BX \u7684\u503c\u9001\u5165\u6808: -&gt; 2266H, 0123H, SP -= 2\npop cx        ; \u5f39\u51fa 2266H, CX = 2266H, SP += 2\npop dx        ; \u5f39\u51fa 0123H, DX = 0123H, SP += 2\n</code></pre>"},{"location":"lectures/lecture01/#_19","title":"\u7b2c\u56db\u7ae0\uff1a\u7b2c\u4e00\u4e2a\u7a0b\u5e8f","text":"<p>\u521b\u5efa\u4e00\u4e2a\u7a0b\u5e8f\u7684\u6d41\u7a0b\uff1a\u5199\u4ee3\u7801 -&gt; \u7f16\u8bd1 -&gt; \u6267\u884c</p>"},{"location":"lectures/lecture01/#_20","title":"\u5206\u6790\u4e0b\u9762\u7684\u6c47\u7f16\u4ee3\u7801","text":"<pre><code>assume cs:codesg\n\ncodesg segment\n\n    mov ax, 0123H\n    mov bx, 0456H\n    add ax, bx\n    add ax, ax\n\n    mov ax, 4c00H\n    int 21H\n\ncodesg ends\n\nend\n</code></pre> <ul> <li> <p><code>assume \u6bb5\u5bc4\u5b58\u5668:\u6bb5\u540d</code>\uff0c\u5c06\u67d0\u4e2a\u6bb5\u540d\u4e0e\u6bb5\u5bc4\u5b58\u5668\u8054\u7cfb\u8d77\u6765\u3002</p> </li> <li> <p><code>\u6bb5\u540d segment ... \u6bb5\u540d ends</code>\uff0c\u5b9a\u4e49\u4e00\u4e2a\u6bb5\u3002</p> </li> <li> <p><code>end</code>\uff0c\u8868\u793a\u6e90\u4ee3\u7801\u7684\u7ed3\u675f\u3002</p> </li> <li> <p><code>mov ax, 4c00H</code> + <code>int 21H</code>\uff0c\u8868\u793a\u4ee3\u7801\u8fd4\u56de\uff08\u6682\u65f6\u4e0d\u9700\u8981\u4e86\u89e3\uff09\u3002</p> </li> </ul>"},{"location":"lectures/lecture01/#bx-loop","title":"\u7b2c\u4e94\u7ae0\uff1a<code>[BX]</code> \u548c <code>loop</code> \u6307\u4ee4","text":"<p>\u5728\u5185\u5bb9\u5f00\u59cb\u4e4b\u524d\uff0c\u5b9a\u4e49\u51e0\u4e2a\u7ea6\u5b9a\u7684\u7b26\u53f7\u3002</p> <ul> <li> <p><code>(ax)</code> \u8868\u793a <code>AX</code> \u5b58\u653e\u7684\u6570\u636e\uff0c<code>(10000H)</code> \u8868\u793a\u5185\u5b58\u5355\u5143 <code>[1000:0]</code> \u5b58\u653e\u7684\u6570\u636e\u3002</p> </li> <li> <p><code>idata</code> \u8868\u793a\u4e00\u4e2a\u6570\u5b57\uff0c\u4f8b\u5982 <code>mov ax, idata</code>\u3002</p> </li> </ul>"},{"location":"lectures/lecture01/#bx","title":"\u4ec0\u4e48\u662f <code>[BX]</code>\uff1f","text":"<p>\u6211\u4eec\u77e5\u9053 <code>[0]</code> \u662f\u4e00\u4e2a\u5185\u5b58\u5355\u5143\uff0c\u5b83\u8868\u793a <code>DS:0</code>\uff0c<code>[BX]</code> \u540c\u6837\u5982\u6b64\uff0c\u5b83\u8868\u793a <code>DS:BX</code>\u3002</p> <p>\u4ee5\u4e0b\u4ee3\u7801\u662f\u5408\u6cd5\u7684\uff1a</p> <pre><code>mov ax, [bx]\nmov al, [bx]\n</code></pre>"},{"location":"lectures/lecture01/#loop","title":"\u4ec0\u4e48\u662f loop\uff1f","text":"<p>\u8fd9\u91cc\u7ed9\u51fa\u4e00\u6bb5\u5faa\u73af\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\ncode segment\n\n    mov ax, 2\n    mov cx, 11\ns:\n    add ax, ax\n    loop s\n\n    mov ax, 4c00h\n    int 21h\n\ncode ends\n\nend\n</code></pre> <ul> <li> <p><code>mov cx, 11</code>\uff1a<code>CX</code> \u662f Counter Register\uff0c\u7528\u6765\u8ba1\u6570\uff0c\u8fd9\u91cc\u8868\u793a\u5faa\u73af\u6267\u884c 11 \u6b21\u3002</p> </li> <li> <p><code>s:</code>\uff1as \u662f\u4e00\u4e2a\u5faa\u73af\u6807\u8bb0\uff0c\u4e0e <code>loop s</code> \u914d\u5408\u4f7f\u7528\u3002</p> </li> <li> <p><code>loop s</code>\uff1a\u8df3\u8f6c\u5230\u5faa\u73af\u6807\u8bb0 s \u5904\u6267\u884c\u3002</p> </li> </ul>"},{"location":"lectures/lecture01/#loop-bx","title":"<code>loop</code> \u548c <code>[bx]</code> \u7684\u8054\u5408\u4f7f\u7528","text":"<p>\u8fd9\u91cc\u7ed9\u51fa\u4e00\u6bb5\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\ncode segment\n\n    mov ax, 0ffffh\n    mov ds, ax\n    mov bx, 0\n    mov cx, 12\ns:\n    mov al, [bx]\n    mov ah, 0\n    add dx, ax\n    inc bx\n    loop s\n\n    mov ax, 4c00h\n    int 21h\n\ncode ends\n\nend\n</code></pre> <ul> <li> <p>\u7b2c\u4e00\u6b65\uff1a\u5c06 <code>DS</code> \u5b9a\u4f4d\u5230 <code>FFFF:0</code>\u3002</p> </li> <li> <p>\u7b2c\u4e8c\u6b65\uff1a\u8bbe\u7f6e <code>BX</code> \u504f\u79fb\u4e3a 0\u3002</p> </li> <li> <p>\u7b2c\u4e09\u6b65\uff1a\u5c06\u5faa\u73af\u8ba1\u6570\u5668 <code>CX</code> \u8bbe\u7f6e\u4e3a 12\u3002</p> </li> <li> <p>\u7b2c\u56db\u6b65\uff1a\u8fdb\u5165\u5faa\u73af\uff0c<code>AX</code> = <code>(DS:BX)</code>\uff0c<code>DX</code> += <code>AX</code>\uff0c<code>BX</code>++\u3002</p> </li> <li> <p>\u7b2c\u4e94\u6b65\uff1a\u9000\u51fa\u7a0b\u5e8f\u3002</p> </li> </ul>"},{"location":"lectures/lecture01/#_21","title":"\u4ec0\u4e48\u662f\u6bb5\u524d\u7f00\uff1f","text":"<p><code>mov ax, cs:[bx]</code>\uff0c\u8fd9\u91cc\u7684 <code>cs:</code> \u5c31\u662f\u6bb5\u524d\u7f00\u3002</p> <p>\u5b58\u53d6\u6570\u636e\u9ed8\u8ba4\u7684\u6bb5\u524d\u7f00\u4e3a <code>ds:</code>\uff0c\u663e\u793a\u5730\u4fee\u6539\u53ef\u4ee5\u6539\u53d8\u6307\u4ee4\u884c\u4e3a\u3002</p>"},{"location":"lectures/lecture02/","title":"\u6c47\u7f16\u8bed\u8a00\u7b2c\u4e8c\u8bb2","text":""},{"location":"lectures/lecture02/#_2","title":"\u7b2c\u516d\u7ae0\uff1a\u5305\u542b\u591a\u4e2a\u6bb5\u7684\u7a0b\u5e8f","text":""},{"location":"lectures/lecture02/#_3","title":"\u5728\u4ee3\u7801\u6bb5\u4e2d\u4f7f\u7528\u6570\u636e","text":"<p>\u5206\u6790\u5982\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\ncode segment\n\n    dw 0123h, 0456h, 0789, 0abch, 0defh, 0fedh, 0cbah, 0987h\nstart:\n    mov bx, 0\n    mov ax, 0\n    mov cx, 8\ns:\n    add ax, cs:[bx]\n    add bx, 2\n    loop s\n\n    mov ax, 4c00h\n    int 21h\n\ncode ends\n\nend start\n</code></pre> <ul> <li> <p><code>dw</code> \u5373\u4e3a define word\uff0c\u610f\u4e3a\u5b9a\u4e49\u5b57\u578b\u6570\u636e\u3002</p> </li> <li> <p><code>start</code> ... <code>end start</code> \u6807\u660e\u4e86\u7a0b\u5e8f\u7684\u6267\u884c\u8303\u56f4\uff0c\u8fd9\u5411\u7f16\u8bd1\u5668\u89e3\u91ca\u4e86\u4e0d\u8981\u4ece\u5f00\u5934\u5b9a\u4e49\u7684\u6570\u636e\u5f00\u59cb\u6267\u884c\u3002</p> </li> </ul>"},{"location":"lectures/lecture02/#_4","title":"\u5728\u4ee3\u7801\u6bb5\u4e2d\u4f7f\u7528\u6808","text":"<p>\u5206\u6790\u5982\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\ncode segment\n\ndw 0123h, 0456h, 0789h, 0abch, 0defh, 0fedh, 0cbah, 0987h\ndw 0, 0, 0, 0, 0, 0, 0, 0\n\nstart:\n    mov ax, cs\n    mov ss, ax\n    mov sp, 20h\n    mov bx, 0\n    mov cx, 8\ns:\n    push cs:[bx]\n    add bx, 2\n    loop s\n\n    mov bx, 0\n    mov cx, 8\ns0:\n    pop cs:[bx]\n    add bx, 2\n    loop s0\n\n    mov ax, 4c00h\n    int 21h\n\ncode ends\n\nend start\n</code></pre> <ul> <li>\u5bf9 <code>SS</code> \u548c <code>SP</code> \u7684\u4fee\u6539\u6539\u53d8\u4e86 <code>push</code> \u548c <code>pop</code> \u7684\u9ed8\u8ba4\u884c\u4e3a\u3002</li> </ul>"},{"location":"lectures/lecture02/#_5","title":"\u6570\u636e\u3001\u4ee3\u7801\u3001\u6808\u5206\u6bb5\u5b58\u653e","text":"<p>\u5206\u6790\u5982\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code, ds:data, ss:stack\ndata segment\n    dw 0123h, 0456h, 0789h, 0abch, 0defh, 0fedh, 0cbah, 0987h\ndata ends\n\nstack segment\n    dw 0, 0, 0, 0, 0, 0, 0, 0\nstack ends\n\ncode segment\nstart:\n    mov ax, stack\n    mov ss, ax\n    mov sp, 10h\n\n    mov ax, data\n    mov ds, ax\n\n    mov bx, 0\n\n    mov cx, 8\ns:\n    push [bx]\n    add bx, 2\n    loop s\n\n    mov bx, 0\ns0:\n    pop [bx]\n    add bx, 2\n    loop s0\n\n    mov ax, 4c00h\n    int 21h\ncode ends\nend start\n</code></pre> <ul> <li> <p>\u4e3b\u8981\u5173\u6ce8 <code>code</code>\u3001<code>data</code> \u548c <code>stack</code> \u6bb5\u7684\u5b9a\u4e49\uff0c\u4ee5\u53ca\u5bf9\u5e94\u5728\u4ee3\u7801\u4e2d\u7684\u521d\u59cb\u5316\u5904\u7406\u3002</p> </li> <li> <p><code>code</code>\u3001<code>data</code> \u548c <code>stack</code> \u662f\u6bb5\u5730\u5740\uff0c\u53ef\u4ee5\u88ab\u89c6\u4e3a\u4e00\u4e2a\u6570\u5b57\u88ab\u9001\u5165\u5bc4\u5b58\u5668\u4e2d\u3002</p> </li> </ul>"},{"location":"lectures/lecture02/#_6","title":"\u7b2c\u4e03\u7ae0\uff1a\u66f4\u7075\u6d3b\u7684\u5b9a\u4f4d\u5185\u5b58\u5730\u5740\u7684\u65b9\u6cd5","text":""},{"location":"lectures/lecture02/#and-or","title":"<code>and</code> \u548c <code>or</code>","text":"<ul> <li> <p><code>and</code> \u6307\u4ee4\uff1a\u6309\u4f4d\u4e0e</p> </li> <li> <p><code>or</code> \u6307\u4ee4\uff1a\u6309\u4f4d\u6216</p> </li> </ul> <p><code>and al, 00111011b</code>\uff1a<code>AL</code> = <code>AL</code> &amp; 00111011B</p> <p><code>or al, 00111011b</code>\uff1a<code>AL</code> = <code>AL</code> | 00111011B</p>"},{"location":"lectures/lecture02/#ascii","title":"ASCII \u7801","text":"<p>\u5728\u6c47\u7f16\u7a0b\u5e8f\u4e2d\uff0c\u7528 '...' \u7684\u5f62\u5f0f\u7ed9\u51fa\u7684\u6570\u636e\u662f\u5b57\u7b26\u3002</p> <p>\u5206\u6790\u4ee5\u4e0b\u7a0b\u5e8f\uff1a</p> <pre><code>assume cs:code, ds:data\ndata segment\n    db 'unix'\n    db 'fork'\ndata ends\n\ncode segment\nstart:\n    mov al, 'a'\n    mov bl, 'b'\n    mov ax, 4c00h\n    int 21h\ncode ends\nend start\n</code></pre> <ul> <li><code>db</code> \u8868\u793a define byte\uff0c\u56e0\u4e3a\u5b57\u7b26\u7684 ASCII \u7801\u662f 8 \u4f4d\u3002\u4f60\u53ef\u4ee5\u5728\u5185\u5b58\u4e2d\u7684 <code>data</code> \u6bb5\u67e5\u770b\u4ed6\u4eec\u7684\u5177\u4f53\u503c\u3002</li> </ul> <p>\u4e0b\u9762\u7ed9\u51fa\u4e00\u4efd\u5927\u5c0f\u5199\u8f6c\u6362\u7684\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code, ds:data\ndata segment\n    db 'BaSiC'\n    db 'iNfOrMaTiOn'\ndata ends\n\ncode segment\nstart:\n    mov ax, data\n    mov ds, ax\n\n    mov bx, 0\n\n    mov cx, 5\ns:\n    mov al, [bx]\n    and al, 11011111b\n    mov [bx], al\n    inc bx\n    loop s\n\n    mov cx, 11\ns0:\n    mov al, [bx]\n    or al, 00100000b\n    mov [bx], al\n    inc bx\n    loop s0\n\n    mov ax, 4c00h\n    int 21h\ncode ends\nend start\n</code></pre> <ul> <li> <p>\u8fd9\u4e2a\u7a0b\u5e8f\u5b9e\u73b0\u4e86\u5c06\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e32\u5927\u5199\u3001\u7b2c\u4e8c\u4e2a\u5b57\u7b26\u4e32\u5c0f\u5199\u7684\u529f\u80fd\u3002</p> </li> <li> <p>\u5c06\u4efb\u610f\u5b57\u6bcd\u7684\u7b2c 5 \u4f4d\u7f6e 0 \u5373\u4e3a\u5927\u5199\uff0c\u7f6e 0 \u5373\u4e3a\u5c0f\u5199\u3002</p> </li> </ul>"},{"location":"lectures/lecture02/#bx-idata","title":"<code>[bx + idata]</code>","text":"<p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code, ds:data\ndata segment\n    db 'BaSiC'\n    db 'MinIX'\ndata ends\ncode segment\nstart:\n    mov ax, data\n    mov ds, ax\n\n    mov bx, 0\n\n    mov cx, 5\ns:\n    mov al, [bx]\n    and a1, 11011111b\n    mov [bx], al\n    mov al, [5+bx]\n    or al, 00100000b\n    mov [5+bx], al\n    inc bx\n    loop s\ncode ends\nend start\n</code></pre>"},{"location":"lectures/lecture02/#si-di","title":"<code>SI</code> \u548c <code>DI</code>","text":"<p><code>SI</code> \u662f Source Index \u7684\u7f29\u5199\uff0c<code>DI</code> \u662f Destination Index \u7684\u7f29\u5199\uff0c\u5b83\u4eec\u548c <code>BX</code> \u7684\u4f5c\u7528\u76f8\u4f3c\u3002</p> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code, ds:data\ndata segment\n    db 'welcome to masm!'\n    db '................'\ndata ends\n\ncode segment\nstart:\n    mov ax, data\n    mov ds, ax\n    mov si, 0\n    mov di, 16\n\n    mov cx, 8\ns:\n    mov ax, [si]\n    mov [di], ax\n    add si, 2\n    add di, 2\n    loop s\n\n    mov ax, 4c00h\n    int 21h\ncode ends\nend start\n</code></pre>"},{"location":"lectures/lecture02/#bxsiidata-bxdiidata","title":"<code>[bx+si+idata]</code> \u548c <code>[bx+di+idata]</code>","text":"<p>\u4ee5\u4e0b\u6307\u4ee4\u662f\u7b49\u6548\u7684\uff1a</p> <ul> <li> <p><code>mov ax, [bx+si+200]</code></p> </li> <li> <p><code>mov ax, [bx+200+si]</code></p> </li> <li> <p><code>mov ax, [200+bx+si]</code></p> </li> <li> <p><code>mov ax, 200[bx][si]</code></p> </li> <li> <p><code>mov ax, [bx].200[si]</code></p> </li> <li> <p><code>mov ax, [bx][si].200</code></p> </li> </ul>"},{"location":"lectures/lecture03/","title":"\u6c47\u7f16\u8bed\u8a00\u7b2c\u4e09\u8bb2","text":""},{"location":"lectures/lecture03/#_2","title":"\u7b2c\u516b\u7ae0\uff1a\u6570\u636e\u5904\u7406\u7684\u4e24\u4e2a\u57fa\u672c\u95ee\u9898","text":"<p>\u6240\u8c13\u7684\u4e24\u4e2a\u95ee\u9898\uff1a</p> <ol> <li> <p>\u6570\u636e\u5728\u4ec0\u4e48\u5730\u65b9\uff1f</p> </li> <li> <p>\u6570\u636e\u6709\u591a\u957f\uff1f</p> </li> </ol> <p>\u5b9a\u4e49\u4e24\u4e2a\u7b26\u53f7\uff1a<code>reg</code> \u548c <code>sreg</code></p> <ul> <li> <p><code>reg</code>\uff1a\u8868\u793a\u5bc4\u5b58\u5668\uff0c\u5305\u62ec <code>ax</code>\u3001<code>bx</code>\u3001<code>cs</code>\u3001<code>dx</code>\u3001<code>ah</code>\u3001<code>al</code>\u3001<code>bh</code>\u3001<code>bl</code>\u3001<code>ch</code>\u3001<code>cl</code>\u3001<code>dh</code>\u3001<code>dl</code>\u3001<code>sp</code>\u3001<code>bp</code>\u3001<code>si</code>\u3001<code>di</code>\u3002</p> </li> <li> <p><code>sreg</code>\uff1a\u8868\u793a\u6bb5\u5bc4\u5b58\u5668\uff0c\u5305\u62ec <code>ds</code>\u3001<code>ss</code>\u3001<code>cs</code>\u3001<code>es</code>\u3002</p> </li> </ul>"},{"location":"lectures/lecture03/#bxsidi-bp","title":"<code>bx</code>\u3001<code>si</code>\u3001<code>di</code> \u548c <code>bp</code>","text":"<p>\u53ea\u6709\u8fd9\u56db\u4e2a\u5bc4\u5b58\u5668\u53ef\u4ee5\u51fa\u73b0\u5728 <code>[...]</code> \u4e2d\uff0c\u4e14\u53ea\u80fd\u5355\u4e2a\u6216\u4ee5 <code>bx+si</code>\u3001<code>bx+di</code>\u3001<code>bp+si</code> \u548c <code>bp+di</code> \u7684\u5f62\u5f0f\u51fa\u73b0\u3002</p> <p>\u524d\u4e09\u6761\u5bc4\u5b58\u5668\u9ed8\u8ba4\u6bb5\u5bc4\u5b58\u5668\u4e3a <code>ds</code>\uff0c\u800c <code>bp</code> \u7684\u9ed8\u8ba4\u6bb5\u5bc4\u5b58\u5668\u4e3a <code>ss</code>\u3002</p>"},{"location":"lectures/lecture03/#x-ptr","title":"<code>X ptr</code>","text":"<p>\u5728\u6709\u5bc4\u5b58\u5668\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u957f\u5ea6\u7531\u5bc4\u5b58\u5668\u7684\u957f\u5ea6\u7ed9\u51fa\uff0c\u5982 <code>ax</code> \u662f 16 \u4f4d\uff0c<code>al</code> \u662f 8 \u4f4d\u3002\u4f46\u5b58\u5728\u4e00\u4e9b\u4e0d\u6d89\u53ca\u5bc4\u5b58\u5668\u7684\u64cd\u4f5c\uff0c\u5982 <code>mov [0], 1</code>\uff0c\u6211\u4eec\u5411 <code>[0]</code> \u5730\u5740\u5b58\u5165\u7684\u662f\u5b57\u8fd8\u662f\u5b57\u8282\uff1f</p> <p>\u4e3a\u4e86\u660e\u786e\u8fd9\u4e2a\u95ee\u9898\uff0c\u5f15\u5165 <code>X ptr</code> \u4fee\u9970\u7b26\uff0c\u52a0\u5728\u5730\u5740\u5355\u5143\u4e4b\u524d\uff0c\u5982 <code>mov word ptr [0], 1</code>\uff0c\u8fd9\u6837\u5c31\u660e\u786e\u5b58\u5165\u7684\u6570\u636e\u957f\u5ea6\u4e3a 16\uff0c\u800c <code>mov byte ptr [0], 1</code> \u5219\u8868\u793a\u5b58\u5165\u7684\u6570\u636e\u957f\u5ea6\u4e3a 8\u3002</p>"},{"location":"lectures/lecture03/#_3","title":"\u5bfb\u5740\u65b9\u5f0f\u7ec3\u4e60","text":"<p>\u5206\u6790\u5982\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code, ds:data\n\ndata segment\n    dw 0, 0, 0, 0, 0, 0, 0, 0 ; ds:10h\n    db 'DEC' ; 00\n    db 'Ken Oslen' ; 03\n    dw 137 ; 0C \n    dw 40 ; 0E\n    db 'PDP' ; 10\ndata ends\n\ncode segment\ns:\n    mov dx, data\n    mov ds, dx\n\n    mov bx, 10h\n    mov word ptr [bx+0ch], 38\n    mov word ptr [bx+0eh], 70\n    mov byte ptr [bx+10h+0h], 'V'\n    mov byte ptr [bx+10h+1h], 'A'\n    mov byte ptr [bx+10h+2h], 'X'\n\n    mov ax, 4c00h\n    int 21h\ncode ends\n\nend s\n</code></pre>"},{"location":"lectures/lecture03/#_4","title":"\u65b0\u7684\u6307\u4ee4","text":"<p>\u9664\u6cd5\uff1a</p> <p>usage\uff1a<code>div reg/[...]</code></p> <p>\u8be5\u6307\u4ee4\u5bf9\u4e8e\u4e0d\u540c\u957f\u5ea6\u7684\u64cd\u4f5c\u6570\u6709\u4e0d\u540c\u7684\u884c\u4e3a\uff1a</p> <ul> <li> <p>8 \u4f4d\uff1a\u4f1a\u5c06 <code>ax</code> \u4e2d\u7684\u6570\u9664\u4ee5\u64cd\u4f5c\u6570\uff0c\u5e76\u5c06\u5546\u5b58\u5165 <code>al</code> \u4e2d\uff0c\u5c06\u4f59\u6570\u5b58\u5165 <code>ah</code> \u4e2d\u3002</p> </li> <li> <p>16 \u4f4d\uff1a\u4f1a\u5c06 <code>dx|ax</code> \u4e2d\u7684\u6570\u9664\u4ee5\u64cd\u4f5c\u6570\uff0c\u5e76\u5c06\u5546\u5b58\u5165 <code>ax</code> \u4e2d\uff0c\u5c06\u4f59\u6570\u5b58\u5165 <code>dx</code> \u4e2d\u3002</p> </li> </ul> <p>\u9057\u61be\u7684\u662f\uff0c\u8fd9\u6761\u6307\u4ee4\u5728\u51fa\u73b0\u6ea2\u51fa\u65f6\u4f1a\u8fdb\u5165\u4e2d\u65ad\u5904\u7406\u3002\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\u7684\u65b9\u5f0f\u5c06\u4e8e\u540e\u9762\u7ed9\u51fa\u3002</p> <p>\u5b58\u653e\u53cc\u5b57\uff1a</p> <p>usage: <code>dd idata</code></p> <p>\u6211\u4eec\u4e4b\u524d\u89c1\u8fc7 <code>db</code> \u548c <code>dw</code>\uff0c\u5206\u522b\u5b58\u653e 8 \u4f4d \u548c 16 \u4f4d\u6570\u636e\uff0c<code>dd</code> \u5219\u5b58\u653e 32 \u4f4d\u6570\u636e\u3002</p> <p>\u6570\u636e\u91cd\u590d\uff1a</p> <p>usage\uff1a<code>db idata dup (idata0, idata1, ...)</code></p> <p>\u8fd9\u4f1a\u5c06 <code>idata0, idata1, ...</code> \u91cd\u590d <code>idata</code> \u6b21\u3002</p>"},{"location":"lectures/lecture03/#_5","title":"\u7b2c\u4e5d\u7ae0\uff1a\u8f6c\u79fb\u6307\u4ee4\u7684\u539f\u7406","text":"<p>\u53ef\u4ee5\u4fee\u6539 <code>IP</code>\uff0c\u6216\u540c\u65f6\u4fee\u6539 <code>CS</code> \u548c <code>IP</code> \u7684\u6307\u4ee4\u7edf\u79f0\u4e3a\u8f6c\u79fb\u6307\u4ee4\u3002</p>"},{"location":"lectures/lecture03/#offset","title":"<code>offset</code>","text":"<p>\u8fd8\u8bb0\u5f97\u6211\u4eec\u4e4b\u524d\u63d0\u5230\u8fc7\u7684\u5faa\u73af\u6807\u8bb0\u5417\uff1f\u4e8b\u5b9e\u4e0a\uff0c\u5b83\u53ea\u662f\u6c47\u7f16\u8bed\u8a00\u4ee3\u7801\u6bb5\u4e2d\u504f\u79fb\u5730\u5740\u7684\u4e00\u79cd\u6807\u8bb0\uff0c\u5e76\u4e0d\u662f\u53ea\u6709\u5faa\u73af\u624d\u4f1a\u7528\u5230\u3002</p> <p>\u5728\u6807\u8bb0\u524d\u9762\u4e0a <code>offset</code> \u5173\u952e\u5b57\u8868\u793a\u53d6\u56de\u6807\u53f7\u76f8\u5bf9 <code>cs</code> \u7684\u504f\u79fb\u5730\u5740\uff0c\u5206\u6790\u5982\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\ncode segment\nstart:\n    mov ax, offset start    ; \u76f8\u5f53\u4e8e mov ax, 0\ns:\n    mov ax, offset s        ; \u76f8\u5f53\u4e8e mov ax, 3\ncode ends\nend start\n</code></pre> <p>\u7531\u4e8e <code>mov ax, offset start</code> \u7ffb\u8bd1\u4e3a\u673a\u5668\u7801\u7684\u957f\u5ea6\u4e3a 24 \u4f4d\uff0c\u6240\u4ee5\u5728\u53d6 <code>s</code> \u7684\u504f\u79fb\u65f6\u4e3a 3</p> <p>\u5206\u6790\u5982\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\ncode segment\ns:\n    mov ax, bx\n    mov si, offset s\n    mov di, offset s0\n    mov dx, cs:[si]\n    mov cs:[di], dx\ns0:\n    nop\n    mov ax, 4c00h\n    int 21h\ncode ends\nend s\n</code></pre>"},{"location":"lectures/lecture03/#jmp","title":"<code>jmp</code>","text":"<p><code>jmp</code> \u662f\u65e0\u6761\u4ef6\u8f6c\u79fb\u6307\u4ee4\uff0c\u5176\u64cd\u4f5c\u6570\u53ef\u4ee5\u662f\uff1a</p> <ul> <li> <p><code>short s</code>\uff1a\u6bb5\u5185\u77ed\u8f6c\u79fb\uff0c\u76f8\u5bf9\u4e8e\u5f53\u524d\u6307\u4ee4\u7684 -128 ~ 127\uff0c\u8df3\u8f6c\u5230 <code>s</code> \u6240\u5728\u7684\u6307\u4ee4\u3002</p> </li> <li> <p><code>far ptr s</code>\uff1a\u6bb5\u95f4\u957f\u8f6c\u79fb\uff0c\u540c\u65f6\u4fee\u6539 <code>CS</code> \u548c <code>IP</code>\uff0c\u8df3\u8f6c\u5230 <code>s</code> \u6240\u5728\u7684\u6307\u4ee4\u3002</p> </li> <li> <p><code>reg</code>\uff1a\u4e0d\u518d\u8d58\u8ff0\u3002</p> </li> <li> <p><code>word ptr [...]</code>\uff1a<code>IP</code> = <code>[...]</code>\u3002</p> </li> <li> <p><code>dword ptr [...]</code>\uff1a<code>CS</code> = <code>[...]</code>\uff0c<code>IP</code> = <code>[... + 2]</code>\u3002</p> </li> </ul>"},{"location":"lectures/lecture03/#jcxz","title":"<code>jcxz</code>","text":"<p>\u6240\u6709\u7684\u6709\u6761\u4ef6\u8f6c\u79fb\u6307\u4ee4\u90fd\u662f\u77ed\u8f6c\u79fb\uff0c\u5373\u8f6c\u79fb\u8303\u56f4\u4e3a -128 ~ 127\u3002</p> <p>usage\uff1a<code>jcxz s</code></p> <p>\u8bf4\u660e\uff1a\u8fd9\u6761\u6307\u4ee4\u8868\u793a\u5982\u679c <code>CX</code> \u4e3a 0\uff0c\u5219\u8df3\u8f6c\u81f3\u6807\u53f7 <code>s</code> \u5904\u3002</p>"},{"location":"lectures/lecture03/#loop","title":"<code>loop</code>","text":"<p>usage\uff1a<code>loop s</code></p> <p>\u5148\u6267\u884c <code>CX = CX - 1</code>\uff0c\u518d\u5224\u65ad\u662f\u5426 <code>CX \u2260 0</code>\uff0c\u82e5\u662f\u5219\u8df3\u8f6c\u81f3\u6807\u53f7 <code>s</code> \u5904\u3002</p> <p>\u5206\u6790\u5982\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\ncode segment\nstart:\n    mov ax, 2000h\n    mov ds, ax\n    mov bx, 0\ns:\n    mov cl, [bx]\n    mov ch, 0\n    inc cx\n    inc bx\n    loop s\nok:\n    dec bx\n    mov dx, bx\n    mov ax, 4c00h\n    int 21h\ncode ends\nend start\n</code></pre>"},{"location":"lectures/lecture03/#_6","title":"\u63a7\u5236\u663e\u793a\u5c4f","text":"<p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\ncode segment\n    db 'H', 4, 'e', 4, 'l', 4, 'l', 4, 'o', 4, ',', 4, ' ', 4\n    db 'w', 4, 'o', 4, 'r', 4, 'l', 4, 'd', 4, '!', 4\nstart:\n    mov dx, 0B800h\n    mov ds, dx\n\n    mov bx, 0\n    mov cx, 13\ncopy:\n    mov dx, cs:[bx]\n    mov [bx], dx\n    add bx, 2\n    loop copy\n\n    mov ax, 4c00h\n    int 21h\ncode ends\nend start\n</code></pre> <p>8086 \u6709\u4e00\u4e2a 80 x 25 \u7684\u5f69\u8272\u663e\u793a\u5668\uff0c\u663e\u793a\u5668\u53ef\u4ee5\u663e\u793a 25 \u884c\uff0c\u6bcf\u884c 80 \u4e2a\u5b57\u7b26\uff0c\u6bcf\u4e2a\u5b57\u7b26\u6709 256 \u79cd\u5c5e\u6027\u3002</p> <p>\u4e00\u4e2a\u5b57\u7b26\u7531\u5176 ASCII \u7801\u548c\u5176\u5c5e\u6027\uff088 \u4f4d\uff09\u7ec4\u6210\uff0c\u5373\u4e00\u4e2a\u5b57\u3002\u4e00\u884c 80 \u4e2a\u5b57\u7b26\u5360 160 \u5730\u5740\u7a7a\u95f4\u3002</p> <p>\u663e\u793a\u5668\u7684\u5185\u5b58\u5730\u5740\u8303\u56f4\u4e3a B8000H ~ BFFFFH\uff0c\u5171 8000H \u7684\u5730\u5740\u7a7a\u95f4\uff0c\u800c\u663e\u793a\u5668\u5171\u6709 8 \u9875\uff0c\u5373\u6bcf\u9875\u5360\u7528 1000H \u7684\u5730\u5740\u7a7a\u95f4\u3002\u663e\u793a\u5668\u9ed8\u8ba4\u663e\u793a\u7b2c\u4e00\u9875\u3002</p> <p>\u5c5e\u6027\u5b57\u8282\u7684\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <p>BL BR BG BB I FR FG FB</p> <p>\u5206\u522b\u4e3a\uff1a\u95ea\u70c1\u3001\u80cc\u666f\u7ea2\u3001\u80cc\u666f\u7eff\u3001\u80cc\u666f\u84dd\u3001\u9ad8\u4eae\u3001\u524d\u666f\u7ea2\u3001\u524d\u666f\u7eff\u548c\u524d\u666f\u84dd\u3002</p>"},{"location":"lectures/lecture04/","title":"\u6c47\u7f16\u8bed\u8a00\u7b2c\u56db\u8bb2","text":""},{"location":"lectures/lecture04/#call-ret","title":"\u7b2c\u5341\u7ae0\uff1a<code>CALL</code> \u548c <code>RET</code> \u6307\u4ee4","text":""},{"location":"lectures/lecture04/#ret-retf","title":"<code>ret</code> \u548c <code>retf</code>","text":"<ul> <li> <p><code>ret</code> \u76f8\u5f53\u4e8e <code>pop ip</code></p> </li> <li> <p><code>retf</code> \u76f8\u5f53\u4e8e <code>pop ip, pop cs</code></p> </li> </ul> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\nstack segment\n    db 16 dup (0)\nstack ends\n\ncode segment\n    mov ax, 4c00h\n    int 21h\nstart:\n    mov ax, stack\n    mov ss, ax\n    mov sp, 16\n    mov ax, 0\n    push ax\n    ret\ncode ends\nend start\n</code></pre> <ul> <li><code>ret</code> \u6307\u4ee4\u5c06\u9001\u5165\u6808\u7684 0 \u8d4b\u7ed9 <code>IP</code>\uff0c\u4f7f\u5f97\u7a0b\u5e8f\u8df3\u8f6c\u81f3 <code>code</code> \u6bb5\u7684\u7b2c\u4e00\u6761\u6307\u4ee4\u3002</li> </ul> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\nstack segment\n    db 16 dup (0)\nstack ends\n\ncode segment\n    mov ax, 4c00h\n    int 21h\nstart:\n    mov ax, stack\n    mov ss, ax\n    mov sp, 16\n    mov ax, 0\n    push cs\n    push ax\n    retf\ncode ends\nend start\n</code></pre> <ul> <li><code>retf</code> \u5c06\u9001\u5165\u6808\u7684 <code>CS</code> \u548c <code>AX</code> \u8d4b\u503c\u7ed9 <code>CS</code> \u548c <code>SP</code>\uff0c\u8df3\u8f6c\u5230\u4e86\u5bf9\u5e94\u7684\u6307\u4ee4\u5904</li> </ul>"},{"location":"lectures/lecture04/#call","title":"<code>call</code>","text":"<p>usage\uff1a</p> <ul> <li> <p><code>call s</code></p> </li> <li> <p><code>call far ptr s</code></p> </li> <li> <p><code>call reg</code></p> </li> <li> <p><code>call word ptr [...]</code></p> </li> <li> <p><code>call dword ptr [...]</code></p> </li> </ul> <p>function\uff1a</p> <ul> <li> <p><code>push ip, jmp s</code></p> </li> <li> <p><code>push cs, push ip, jmp far ptr s</code></p> </li> <li> <p><code>push ip, jmp reg</code></p> </li> <li> <p><code>push ip, jmp word ptr [...]</code></p> </li> <li> <p><code>push cs, push ip, jmp dword ptr [...]</code></p> </li> </ul> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>    mov ax, 0\n    call s\n    inc ax\ns:\n    pop ax\n</code></pre> <ul> <li>\u6267\u884c\u4ee3\u7801\u540e\uff0c<code>AX</code> \u4e2d\u7684\u6570\u503c\u4e3a\u591a\u5c11\uff1f</li> </ul> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>    mov ax, 0\n    call far ptr s\n    inc ax\ns:\n    pop ax\n    add ax, ax\n    pop bx\n    add ax, bx\n</code></pre> <ul> <li>\u6267\u884c\u4ee3\u7801\u540e\uff0c<code>AX</code> \u4e2d\u7684\u6570\u503c\u4e3a\u591a\u5c11\uff1f</li> </ul> <p>\u53ea\u4ecb\u7ecd\u524d\u9762\u4e24\u79cd\u7528\u6cd5\uff0c\u540e\u9762\u7684\u4e0d\u518d\u8d58\u8ff0\u3002\u4e0b\u9762\u6211\u4eec\u6765\u770b\u4e00\u4e0b <code>call</code> \u548c <code>ret</code> \u7684\u914d\u5408\u3002</p> <p>\u5206\u6790\u5982\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\ncode segment\nstart:\n    mov ax, 1\n    mov cx, 3\n    call s\n    mov bx, ax\n    mov ax, 4c00h\n    int 21h\ns:\n    add ax, ax\n    loop s\n    ret\ncode end\nend start\n</code></pre> <p>\u7a0b\u5e8f\u7ed3\u675f\u540e\uff0c<code>BX</code> \u4e2d\u7684\u503c\u662f\u591a\u5c11\uff1f</p> <p>\u5206\u6790\u5982\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\nstack segment\n    db 8 dup (0)\n    db 8 dup (0)\nstack ends\n\ncode segment\nstart:\n    mov ax, stack\n    mov ss, ax\n    mov sp, 16\n    mov ax, 1000\n    call s\n    mov ax, 4c00h\n    int 21h\ns:\n    add ax, ax\n    ret\ncode ends\nend start\n</code></pre> <p>\u89c2\u5bdf\u6808\u7684\u53d8\u5316\u3002</p>"},{"location":"lectures/lecture04/#mul","title":"<code>mul</code>","text":"<p>usage\uff1a</p> <ul> <li> <p><code>mul reg8</code></p> </li> <li> <p><code>mul reg16</code></p> </li> <li> <p><code>mul [...]</code></p> </li> </ul> <p>function\uff1a</p> <ul> <li> <p><code>AX = AL x reg8</code></p> </li> <li> <p><code>DX|AX = AX x reg16</code></p> </li> <li> <p>\u4e0d\u518d\u8d58\u8ff0\u3002</p> </li> </ul>"},{"location":"lectures/lecture04/#_2","title":"\u6a21\u5757\u5316\u7a0b\u5e8f\u8bbe\u8ba1","text":"<p>\u5f53\u6211\u4eec\u5c06 <code>call</code> \u548c <code>ret</code> \u8054\u5408\u4f7f\u7528\u65f6\uff0c\u5b83\u50cf\u6781\u4e86 C \u8bed\u8a00\u4e2d\u7684\u51fd\u6570\u8c03\u7528\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u6a21\u5757\u7684\u72ec\u7acb\u5c01\u88c5\u3002\u90a3\u4e48\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u5982\u4f55\u5904\u7406\u53c2\u6570\u548c\u7ed3\u679c\uff1f</p> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\ndata segment\n    dw 1, 2, 3, 4, 5, 6, 7, 8\n    dd 0, 0, 0, 0, 0, 0, 0, 0\ndata ends\n\ncode segment\nstart:\n    mov ax, data\n    mov ds, ax\n    mov si, 0       ; ds:si \u6307\u5411\u7b2c\u4e00\u7ec4 word \u5355\u5143\n    mov di, 16      ; ds:di \u6307\u5411\u7b2c\u4e8c\u7ec4 dword \u5355\u5143\n\n    mov cx, 8\ns:\n    mov bx, [si]\n    call cube\n    mov [di], ax\n    mov [di+2], dx\n    add si, 2       ; ds:si \u6307\u5411\u4e0b\u4e00\u7ec4 word \u5355\u5143\n    add di, 4       ; ds:di \u6307\u5411\u4e0b\u4e00\u7ec4 dword \u5355\u5143\n    loop s\n\n    mov ax, 4c00h\n    int 21h\n\ncube:\n    mov ax, bx\n    mul bx\n    mul bx\n    ret\ncode ends\nend start\n</code></pre> <p>\u8bf7\u8bf4\u660e\u8fd9\u6bb5\u4ee3\u7801\u7684\u4f5c\u7528\u3002</p>"},{"location":"lectures/lecture04/#_3","title":"\u6279\u91cf\u6570\u636e\u7684\u4f20\u9012","text":"<p>\u5f53\u9700\u8981\u4f20\u9012\u6216\u8fd4\u56de\u591a\u4e2a\u6570\u636e\u65f6\uff0c\u5bc4\u5b58\u5668\u6570\u91cf\u662f\u4e0d\u591f\u7684\uff0c\u9700\u8981\u5c06\u6570\u636e\u5b58\u653e\u5728\u5185\u5b58\u4e2d\uff0c\u7528\u5bc4\u5b58\u5668\u8bb0\u5f55\u5176\u5730\u5740\u3002</p> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\ndata segment\n    db 'conversation'\ndata ends\n\ncode segment\nstart:\n    mov ax, data\n    mov ds, ax\n    mov si, 0\n    mov cx, 12\n    call captial\n    mov ax, 4c00h\n    int 21h\ncaptial:\n    and byte ptr [si], 11011111b\n    inc si\n    loop capital\n    ret\ncode ends\nend start\n</code></pre> <p>\u5728\u8fd9\u6bb5\u7a0b\u5e8f\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>SI</code> \u548c <code>BX</code> \u5206\u522b\u4f20\u9012\u4e86\u5b57\u7b26\u4e32\u7684\u5730\u5740\u548c\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u3002</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u66f4\u52a0\u901a\u7528\u7684\u4f20\u53c2\u505a\u6cd5\u662f\u6808\u4e0a\u4f20\u53c2\uff0c\u8fd9\u5c06\u5728\u4ee5\u540e\u63d0\u53ca\u3002</p>"},{"location":"lectures/lecture04/#_4","title":"\u5bc4\u5b58\u5668\u51b2\u7a81","text":"<p>\u5206\u6790\u4ee5\u4e0b\u7a0b\u5e8f\uff1a</p> <pre><code>assume cs:code\n\ndata segment\n    db 'word', 0\n    db 'unix', 0\n    db 'wind', 0\n    db 'good', 0\ndata ends\n\ncode segment\nstart:\n    mov ax, data\n    mov ds, ax\n    mov bx, 0\n\n    mov cx, 4\ns:\n    mov si, bx\n    call capital\n    add bx, 5\n    loop s\n\n    mov ax, 4c00h\n    int 21h\ncaptial:\n    mov cl, [si]\n    mov ch, 0\n    jcxz ok\n    and byte ptr [si], 11011111b\n    inc si\n    jmp short capital\nok:\n    ret\ncode ends\nend start\n</code></pre> <p>\u8fd9\u4e2a\u7a0b\u5e8f\u6709\u4e00\u5904\u81f4\u547d\u9519\u8bef\uff0c\u539f\u7a0b\u5e8f\u548c\u5b50\u7a0b\u5e8f\u662f\u5171\u7528 <code>CX</code> \u7684\uff0c\u90a3\u4e48\u5b50\u7a0b\u5e8f\u5bf9\u4e8e <code>CX</code> \u7684\u4fee\u6539\u5fc5\u7136\u4f1a\u5f71\u54cd\u5230\u539f\u7a0b\u5e8f\u7684\u529f\u80fd\u3002\u5982\u4f55\u89e3\u51b3\uff1f</p> <p>\u6211\u4eec\u53ea\u9700\u8981\u5728\u5b50\u7a0b\u5e8f\u8c03\u7528\u524d\u52a0\u4e0a <code>push cx</code>\u3001\u5728\u5b50\u7a0b\u5e8f\u8c03\u7528\u540e\u52a0\u4e0a <code>pop cx</code>\uff0c\u5373\u53ef\u6d88\u9664\u5b50\u7a0b\u5e8f\u7684\u5f71\u54cd\u3002</p>"},{"location":"lectures/lecture05/","title":"\u6c47\u7f16\u8bed\u8a00\u7b2c\u4e94\u8bb2","text":""},{"location":"lectures/lecture05/#_2","title":"\u7b2c\u5341\u4e00\u7ae0\uff1a\u6807\u5fd7\u5bc4\u5b58\u5668","text":"<p>8086 \u7684\u6807\u5fd7\u5bc4\u5b58\u5668 <code>flag</code> \u6709 16 \u4f4d\uff0c\u5176\u4e2d\u5b58\u50a8\u7684\u4fe1\u606f\u901a\u5e38\u88ab\u79f0\u4e3a PSW\uff08Program Status Word\uff09\u3002\u5176\u4ed6\u5bc4\u5b58\u5668\u662f\u7528\u6765\u5b58\u653e\u6570\u636e\u7684\uff0c\u800c <code>flag</code> \u6309\u4f4d\u5b58\u50a8\u4fe1\u606f\u7684\uff0c\u6bcf\u4e00\u4f4d\u90fd\u6709\u4e13\u95e8\u7684\u542b\u4e49\uff1a</p> <ul> <li> <p>0\uff1aCF\uff0cCarry Flag</p> </li> <li> <p>2\uff1aPF\uff0cParity Flag</p> </li> <li> <p>4\uff1aAF\uff0cAuxiliary Carry Flag</p> </li> <li> <p>6\uff1aZF\uff0cZero Flag</p> </li> <li> <p>7\uff1aSF\uff0cSign Flag</p> </li> <li> <p>8\uff1aTF\uff0cTrap Flag</p> </li> <li> <p>9\uff1aIF\uff0cInterrupt Enable Flag</p> </li> <li> <p>10\uff1aDF\uff0cDirection Flag</p> </li> <li> <p>11\uff1aOF\uff0cOverflow Flag</p> </li> </ul> <p>\u9664\u4e86\u4e0a\u8ff0\u4f4d\uff0c\u5176\u4ed6\u4f4d\u6ca1\u6709\u610f\u4e49\u3002</p>"},{"location":"lectures/lecture05/#zf","title":"<code>ZF</code>","text":"<p>\u96f6\u6807\u5fd7\u4f4d\uff0c\u8bb0\u5f55\u76f8\u5173\u6307\u4ee4\u6267\u884c\u540e\u7684\u7ed3\u679c\u662f\u5426\u4e3a 0\u3002\u5982\u679c\u4e3a 0\uff0c<code>ZF</code> = 1\uff1b\u5426\u5219\uff0c<code>ZF</code> = 0\u3002</p> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>mov ax, 1\nsub ax, 1\n</code></pre> <p>\u6267\u884c\u540e\uff0c<code>AX</code> = 0\uff0c<code>ZF</code> = 1\u3002</p> <p>\u5728 8086 CPU \u7684\u6307\u4ee4\u96c6\u4e2d\uff0c\u6709\u7684\u6307\u4ee4\u7684\u6267\u884c\u662f\u5f71\u54cd\u6807\u5fd7\u5bc4\u5b58\u5668\u7684\uff0c\u6bd4\u5982 <code>add</code>\u3001<code>sub</code>\u3001<code>mul</code>\u3001<code>div</code>\u3001<code>inc</code>\u3001<code>or</code>\u3001<code>and</code> \u7b49\uff0c\u5927\u591a\u4e3a\u8fd0\u7b97\u6307\u4ee4\uff1b\u6709\u7684\u6307\u4ee4\u7684\u6267\u884c\u5bf9\u6807\u5fd7\u5bc4\u5b58\u5668\u6ca1\u6709\u5f71\u54cd\uff0c\u6bd4\u5982 <code>mov</code>\u3001<code>push</code>\u3001<code>pop</code> \u7b49\uff0c\u5b83\u4eec\u5927\u591a\u4e3a\u4f20\u9001\u6307\u4ee4\u3002</p>"},{"location":"lectures/lecture05/#pf","title":"<code>PF</code>","text":"<p>\u5947\u5076\u6807\u5fd7\u4f4d\uff0c\u8bb0\u5f55\u76f8\u5173\u6307\u4ee4\u6267\u884c\u540e\uff0c\u5176\u7ed3\u679c\u6240\u6709\u7684 bit \u4f4d\u4e2d 1 \u7684\u4e2a\u6570\u662f\u5426\u4e3a\u5076\u6570\u3002\u5982\u679c\u662f\u5219 <code>PF</code> = 1\uff0c\u5426\u5219 <code>PF</code> = 0\u3002</p> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>mov al, 1\nor al, 2\n</code></pre> <p>\u6267\u884c\u540e\uff0c<code>AL</code> = 00000011b\uff0c<code>PF</code> = 1\u3002</p>"},{"location":"lectures/lecture05/#sf","title":"<code>SF</code>","text":"<p>\u7b26\u53f7\u6807\u5fd7\u4f4d\uff0c\u8bb0\u5f55\u76f8\u5173\u6307\u4ee4\u6267\u884c\u540e\uff0c\u5176\u7ed3\u679c\u662f\u5426\u4e3a\u8d1f\u3002\u5982\u679c\u662f\u5219 <code>SF</code> = 1\uff0c\u5426\u5219 <code>SF</code> = 0\u3002</p> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>mov al, 01111111b\nadd al, 1\n</code></pre> <p>\u6267\u884c\u540e\uff0c<code>AL</code> = 10000000b\uff0c<code>SF</code> = 1\u3002</p>"},{"location":"lectures/lecture05/#cf","title":"<code>CF</code>","text":"<p>\u8fdb\u4f4d\u6807\u5fd7\u4f4d\uff0c\u8bb0\u5f55\u76f8\u5173\u6307\u4ee4\u6267\u884c\u540e\u662f\u5426\u4ea7\u751f\u8fdb\u4f4d\u6216\u501f\u4f4d\u3002\u5982\u679c\u662f\u5219 <code>CF</code> = 1\uff0c\u5426\u5219 <code>CF</code> = 0\u3002</p> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>mov al, 11111111b\nadd al, 1\n</code></pre> <p>\u6267\u884c\u540e\uff0c<code>AL</code> = 00000000b\uff0c<code>CF</code> = 1\u3002</p> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>mov al, 0\nsub al, 1\n</code></pre> <p>\u6267\u884c\u540e\uff0c<code>AL</code> = 11111111b\uff0c<code>CF</code> = 1\u3002</p>"},{"location":"lectures/lecture05/#of","title":"<code>OF</code>","text":"<p>\u6ea2\u51fa\u6807\u5fd7\u4f4d\uff0c\u8bb0\u5f55\u8ba1\u7b97\u6307\u4ee4\u662f\u5426\u53d1\u751f\u6ea2\u51fa\u3002\u5982\uff1a\u6b63 + \u6b63 = \u8d1f\u3002</p> <p>\u6ce8\u610f\u533a\u5206 <code>CF</code> \u548c <code>OF</code>\uff0c<code>CF</code> \u8003\u5bdf\u7684\u662f\u865a\u62df\u7684\u989d\u5916\u4f4d\uff0c<code>OF</code> \u8003\u5bdf\u7684\u662f\u5b9e\u9645\u7684\u6700\u9ad8\u4f4d\u3002</p> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>mov al, 98\nadd al, 99\n</code></pre> <p>\u6267\u884c\u540e\uff0c<code>AL</code> &lt; 0\uff0cOF = 1\u3002</p>"},{"location":"lectures/lecture05/#adc","title":"<code>adc</code>","text":"<p>\u6307\u4ee4\u683c\u5f0f\uff1a</p> <p><code>adc, obj1, obj2</code></p> <p>\u4f5c\u7528\uff1a</p> <p><code>obj1 = obj1 + obj2 + CF</code></p> <p>\u4e3a\u4ec0\u4e48\u8981\u6709\u8fd9\u4e48\u4e00\u6761\u6307\u4ee4\u5462\uff1f\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>mov ax, 00ffh\nmov bx, 1\nadd ax, bx\n\nmov al, 0ffh\nmov ah, 0\nmov bx, 1\nadd al, bl\nadc ah, bh\n</code></pre> <p>\u4e24\u6bb5\u4ee3\u7801\u5b9e\u73b0\u4e86\u76f8\u540c\u7684\u529f\u80fd\u3002\u62d3\u5c55\u4e00\u4e0b\uff0c16 \u4f4d\u5904\u7406\u5668\u5904\u7406 32 \u4f4d\u6570\u636e\u7684\u539f\u7406\u540c\u4e0a\u3002</p>"},{"location":"lectures/lecture05/#sbb","title":"<code>sbb</code>","text":"<p>\u6307\u4ee4\u683c\u5f0f\uff1a</p> <p><code>sbb obj1, obj2</code></p> <p>\u4f5c\u7528\uff1a</p> <p><code>obj1 = obj1 - obj2 - CF</code></p> <p>\u610f\u4e49\u7c7b\u4f3c\u4e8e <code>adc</code>\u3002</p>"},{"location":"lectures/lecture05/#cmp","title":"<code>cmp</code>","text":"<p>\u6307\u4ee4\u683c\u5f0f\uff1a</p> <p><code>cmp obj1, obj2</code></p> <p>\u4f5c\u7528\uff1a</p> <p><code>ZF = obj1 == obj2</code></p> <p><code>cmp</code> \u6307\u4ee4\u5b9e\u9645\u4e0a\u5728\u505a\u51cf\u6cd5\u8fd0\u7b97\uff0c\u53ea\u662f\u6ca1\u6709\u4fdd\u5b58\u7ed3\u679c\u3002</p>"},{"location":"lectures/lecture05/#_3","title":"\u6761\u4ef6\u8f6c\u79fb\u6307\u4ee4","text":"<p>\u201c\u6761\u4ef6\u201d\u8bf4\u7684\u662f\u6839\u636e\u67d0\u79cd\u6761\u4ef6\u51b3\u5b9a\u662f\u5426\u8df3\u8f6c\uff0c\u6bd4\u5982 <code>jcxz</code> \u5c31\u662f\u6839\u636e <code>CX</code> \u662f\u5426\u4e3a 0 \u6765\u51b3\u5b9a\u662f\u5426\u8df3\u8f6c\u3002</p> <p>\u4e0b\u9762\u662f\u6839\u636e <code>cmp</code> \u6307\u4ee4\u7684\u7ed3\u679c\u8fdb\u884c\u8df3\u8f6c\u7684\u6307\u4ee4\uff1a</p> <ul> <li> <p><code>je</code>\uff1a\u7b49\u4e8e</p> </li> <li> <p><code>jne</code>\uff1a\u4e0d\u7b49\u4e8e</p> </li> <li> <p><code>jb</code>\uff1a\u5c0f\u4e8e</p> </li> <li> <p><code>jnb</code>\uff1a\u4e0d\u5c0f\u4e8e</p> </li> <li> <p><code>ja</code>\uff1a\u5927\u4e8e</p> </li> <li> <p><code>jna</code>\uff1a\u4e0d\u5927\u4e8e</p> </li> </ul> <p>\u8fd9\u4e9b\u6307\u4ee4\u7684\u683c\u5f0f\u540c <code>jcxz</code>\u3002</p>"},{"location":"lectures/lecture05/#df","title":"<code>DF</code>","text":"<p>\u65b9\u5411\u6807\u5fd7\u4f4d\uff0c\u5728\u4f20\u5904\u7406\u6307\u4ee4\u4e2d\uff0c\u63a7\u5236\u6bcf\u6b21\u64cd\u4f5c\u540e <code>SI</code>\u3001<code>DI</code>\u7684\u589e\u51cf\u3002</p> <ul> <li> <p><code>DF = 0</code>\uff1a\u6bcf\u6b21\u64cd\u4f5c\u540e <code>SI</code>\u3001<code>DI</code> \u9012\u589e\u3002</p> </li> <li> <p><code>DF = 1</code>\uff1a\u6bcf\u6b21\u64cd\u4f5c\u540e <code>SI</code>\u3001<code>DI</code> \u9012\u51cf\u3002</p> </li> </ul> <p>\u4e32\u4f20\u9001\u6307\u4ee4\uff1a</p> <p><code>movsb</code></p> <p>\u529f\u80fd\uff1a</p> <pre><code>byte ptr ES:[DI] = byte ptr DS:[SI]\ninc DI | dec DI\ninc SI | dec SI\n</code></pre> <p><code>movsw</code></p> <p>\u529f\u80fd\uff1a</p> <pre><code>word ptr ES:[DI] = word ptr DS:[SI]\nadd DI, 2 | sub DI, 2\nadd SI, 2 | sub SI, 2\n</code></pre> <p>\u4ee5\u4e0a\u6307\u4ee4\u548c <code>rep</code> \u914d\u5408\u4f7f\u7528\uff0c\u529f\u80fd\u4e3a\uff1a</p> <pre><code>s:\n    movsb\n    loop s\n</code></pre> <p>8086 \u63d0\u4f9b\u4e86\u4fee\u6539 <code>DF</code> \u7684\u6307\u4ee4\uff1a</p> <ul> <li> <p><code>cld</code>\uff1aclear DF\uff0c\u5c06 <code>DF</code> \u8bbe\u7f6e\u4e3a 0</p> </li> <li> <p><code>std</code>\uff1aset DF\uff0c\u5c06 <code>DF</code> \u8bbe\u7f6e\u4e3a 1</p> </li> </ul> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>assume cs:code\n\ndata segment\n    db 16 dup (0)\n    db 16 dup (1)\ndata ends\n\ncode segment\n    mov ax, data\n    mov ds, ax\n    mov si, 1fh\n    mov ax, data\n    mov es, ax\n    mov di, 0fh\n    mov cx, 16\n    std\n    rep movsb\ncode ends\n</code></pre>"},{"location":"lectures/lecture05/#pushf-popf","title":"<code>pushf</code> \u548c <code>popf</code>","text":"<p><code>pushf</code> \u7684\u529f\u80fd\u662f\u5c06 <code>flag</code> \u538b\u6808\uff0c<code>popf</code> \u662f\u5c06 <code>flag</code> \u5f39\u6808\u3002\u5b83\u4eec\u4e3a\u8bbf\u95ee\u6807\u5fd7\u5bc4\u5b58\u5668\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u6cd5\u3002</p> <p>\u5206\u6790\u4ee5\u4e0b\u7a0b\u5e8f\uff1a</p> <pre><code>mov ax, 0\npush ax\npopf\nmov ax, 0fff0h\nadd ax, 0010h\npushf\npop ax\nand al, 11000101b\nand ah, 00001000b\n</code></pre> <p>\u6267\u884c\u540e\uff0c<code>AX</code> \u7684\u503c\u662f\u591a\u5c11\uff1f</p>"},{"location":"lectures/lecture05/#_4","title":"\u7b2c\u5341\u4e8c\u7ae0\uff1a\u5185\u4e2d\u65ad","text":"<p>\u9996\u5148\u89e3\u91ca\u4e00\u4e0b\u4ec0\u4e48\u662f\u4e2d\u65ad\u3002\u5f53 CPU \u5728\u6267\u884c\u666e\u901a\u6307\u4ee4\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u610f\u6599\u4e4b\u5916\u7684\u9519\u8bef\uff0c\u5982\uff1a\u6267\u884c\u9664\u6cd5\u65f6\u65e0\u6cd5\u5b58\u653e\u7ed3\u679c\uff0c\u8fd9\u65f6 CPU \u4f1a\u4e2d\u65ad\u6307\u4ee4\u7684\u6267\u884c\uff0c\u8df3\u5230\u4e00\u6bb5\u9884\u5148\u5b9a\u4e49\u7684\u7279\u6b8a\u6307\u4ee4\u5904\u6267\u884c\u76f8\u5e94\u7684\u5904\u7406\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u5c31\u53eb\u4e2d\u65ad\u3002</p> <p>\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>mov ax, 0ffffh\nmov dx, 1\ndiv dx\n</code></pre> <p>\u5355\u6b65\u8fd0\u884c\uff0c\u67e5\u770b\u7a0b\u5e8f\u5982\u4f55\u8fd0\u884c\u3002</p> <p>\u51fa\u73b0\u5728 CPU \u5185\u90e8\u7684\u5f02\u5e38\u88ab\u79f0\u4e3a\u5185\u4e2d\u65ad\uff0c\u4e0e\u4e4b\u76f8\u5bf9\uff0c\u6765\u81ea\u4e8e\u5916\u90e8\u7684\u5f02\u5e38\u88ab\u79f0\u4e3a\u5916\u4e2d\u65ad\u3002</p> <p>\u5f53 CPU \u5185\u90e8\u53d1\u751f\u5982\u4e0b\u60c5\u51b5\u65f6\u4f1a\u4ea7\u751f\u5185\u4e2d\u65ad\uff1a</p> <ul> <li> <p><code>div</code> \u6ea2\u51fa</p> </li> <li> <p>\u5355\u6b65\u6267\u884c</p> </li> <li> <p>\u6267\u884c <code>into</code> \u6307\u4ee4</p> </li> <li> <p>\u6267\u884c <code>int</code> \u6307\u4ee4</p> </li> </ul> <p>\u6211\u4eec\u5df2\u7ecf\u6f14\u793a\u4e86 <code>div</code> \u6ea2\u51fa\u7684\u60c5\u5f62\uff0c\u73b0\u5728\u7740\u91cd\u8bb2\u89e3 <code>int</code> \u6307\u4ee4\u3002</p> <p><code>int</code> \u6307\u4ee4\u5df2\u7ecf\u5728\u4e4b\u524d\u7684\u7a0b\u5e8f\u4e2d\u51fa\u73b0\u8fc7\uff1a</p> <pre><code>mov ax, 4c00h\nint 21h\n</code></pre> <p>\u8fd9\u662f\u7a0b\u5e8f\u7684\u6b63\u5e38\u8fd4\u56de\u8bed\u53e5\u3002</p> <p>\u6307\u4ee4\u683c\u5f0f\uff1a</p> <p><code>int code</code></p> <p>\u4f5c\u7528\uff1a</p> <p>\u6267\u884c\u7f16\u53f7\u4e3a <code>code</code> \u7684\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3002\u4f5c\u4e3a\u521d\u5b66\u8005\uff0c\u6211\u4eec\u5148\u4e0d\u7528\u7ba1\u5982\u4f55\u7f16\u5199\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\uff0c\u53ea\u9700\u8981\u5728\u5408\u9002\u7684\u65f6\u5019\u8c03\u7528\u5408\u9002\u7684\u4e2d\u65ad\u4ee3\u7801\u5373\u53ef\u3002</p>"},{"location":"lectures/lecture05/#int","title":"\u7b2c\u5341\u4e09\u7ae0\uff1a<code>int</code> \u6307\u4ee4","text":"<p>\u8fd9\u4e00\u7ae0\u4e3b\u8981\u8bb2\u89e3\u5982\u4f55\u7f16\u5199\u548c\u5b89\u88c5\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\uff0c\u5982\u4e0a\u8ff0\u6240\u8a00\uff0c\u5728\u6df1\u5165\u5b66\u4e60\u4e4b\u524d\u53ef\u4ee5\u8df3\u8fc7\u3002</p>"},{"location":"lectures/lecture05/#_5","title":"\u7b2c\u5341\u56db\u7ae0\uff1a\u7aef\u53e3","text":""},{"location":"lectures/lecture05/#_6","title":"\u7aef\u53e3\u8bfb\u5199","text":"<p>\u90e8\u5206\u5916\u8bbe\u901a\u8fc7\u7aef\u53e3\u4e0e CPU \u8fdb\u884c\u901a\u8baf\uff0c\u5bf9\u4e8e\u8fd9\u90e8\u5206\u8bbe\u5907\u6709\u4e00\u5bf9\u7279\u6b8a\u7684\u6307\u4ee4\u4e0e\u5176\u901a\u8baf\uff1a</p> <p>\u7aef\u53e3\u5730\u5740\uff1a0 ~ 255</p> <ul> <li> <p><code>in al, address</code></p> </li> <li> <p><code>out address, al</code></p> </li> </ul> <p>\u7aef\u53e3\u5730\u5740\uff1a255 ~ 65535</p> <ul> <li> <p><code>mov dx, address</code></p> </li> <li> <p><code>in al, dx</code></p> </li> <li> <p><code>out dx, al</code></p> </li> </ul> <p>\u7b80\u5355\u4e86\u89e3\u5373\u53ef\u3002</p>"},{"location":"lectures/lecture05/#shl-shr","title":"<code>shl</code> \u548c <code>shr</code>","text":"<p><code>shl</code> \u662f\u903b\u8f91\u5de6\u79fb\u6307\u4ee4\uff0c<code>shr</code> \u662f\u903b\u8f91\u53f3\u79fb\u6307\u4ee4\u3002</p> <p>\u6307\u4ee4\u683c\u5f0f\uff1a</p> <pre><code>shl al, 1\n\nmov cl, idata\nshl al, cl\n</code></pre> <p>\u4f5c\u7528\uff1a</p> <p>\u5c06 <code>AL</code> \u5de6\u79fb 1 \u4f4d\u6216 <code>CL</code> \u4f4d\uff0c\u672b\u5c3e\u8865 0\uff0c\u6700\u9ad8\u4f4d\u88ab\u5199\u5165 <code>CF</code> \u4e2d\u3002\u6ce8\u610f\uff0c<code>shl</code> \u5de6\u79fb\u7684\u4f4d\u6570\u5927\u4e8e 1 \u65f6\u53ea\u80fd\u653e\u5728 <code>CL</code> \u4e2d\u3002</p> <p><code>shr</code> \u4e0e <code>shl</code> \u76f8\u53cd\uff0c\u53f3\u79fb 1 \u4f4d\u6216 <code>CL</code> \u4f4d\uff0c\u9ad8\u4f4d\u8865 0\uff0c\u6700\u4f4e\u4e3a\u88ab\u5199\u5165 <code>CF</code> \u4e2d\u3002</p>"},{"location":"lectures/lecture06/","title":"\u6c47\u7f16\u8bed\u8a00\u7b2c\u516d\u8bb2","text":""},{"location":"lectures/lecture06/#_2","title":"\u7b2c\u5341\u4e94\u7ae0\uff1a\u5916\u4e2d\u65ad","text":"<p>\u5916\u4e2d\u65ad\u5c31\u662f\u7531\u5916\u90e8\u8bbe\u5907\u4ea7\u751f\u7684\u5f02\u5e38\uff0c\u9700\u8981 CPU \u6765\u6267\u884c\u7279\u6b8a\u5904\u7406\u7a0b\u5e8f\u3002\u952e\u76d8\u8f93\u5165\u65f6\u5c31\u4f1a\u4ea7\u751f\u5916\u4e2d\u65ad\u3002</p>"},{"location":"lectures/lecture06/#_3","title":"\u7b2c\u5341\u516d\u7ae0\uff1a\u76f4\u63a5\u5b9a\u5740\u8868","text":""},{"location":"lectures/lecture06/#_4","title":"\u63cf\u8ff0\u5355\u5143\u957f\u5ea6\u7684\u6807\u53f7","text":"<p>\u5206\u6790\u4ee5\u4e0b\u7a0b\u5e8f\uff1a</p> <pre><code>assume cs:code\n\ncode segment\na:\n    db 1, 2, 3, 4, 5, 6, 7, 8\nb:\n    dbw 0\nstart:\n    mov si, offset a\n    mov cx, 8\ns:\n    mov al, cs:[si]\n    mov ah, 0\n    add cs:[bx], ax\n    inc si\n    loop s\n\n    mov ax, 4c00h\n    int 21h\ncode ends\nend start\n</code></pre> <p>\u4e0a\u8ff0\u7a0b\u5e8f\u4e2d\uff0c<code>code</code>\u3001<code>a</code>\u3001<code>b</code>\u3001<code>start</code>\u3001<code>s</code> \u90fd\u662f\u6807\u53f7\uff0c\u4f46\u662f\u8fd9\u4e9b\u6807\u53f7\u90fd\u6307\u6807\u662f\u4e86\u5185\u5b58\u5355\u5143\u7684\u5730\u5740\u3002</p> <p>\u8fd8\u6709\u4e00\u79cd\u6807\u53f7\u4e0d\u4f46\u8868\u793a\u5185\u5b58\u5355\u5143\u7684\u5730\u5740\uff0c\u8fd8\u8868\u793a\u4e86\u5185\u5b58\u5355\u5143\u7684\u957f\u5ea6\uff0c\u5373\u5728\u6b64\u6807\u53f7\u5904\u7684\u662f\u5b57\u8282\u5355\u5143\u3001\u5b57\u5355\u5143\u8fd8\u662f\u53cc\u5b57\u5355\u5143\u3002\u5176\u5f62\u5f0f\u4e3a\uff1a</p> <p><code>s db ...</code></p> <p>\u4e0e\u5e38\u89c4\u6807\u53f7\u76f8\u6bd4\uff0c\u5c11\u4e86\u4e00\u4e2a\u5192\u53f7\u3002</p> <p>\u4e8e\u662f\uff0c\u4e0a\u8ff0\u7a0b\u5e8f\u53ef\u4ee5\u6539\u5199\u4e3a\uff1a</p> <pre><code>assume cs:code\n\ncode segment\na\n    db 1, 2, 3, 4, 5, 6, 7, 8\nb\n    dw 0\nstart:\n    mov si, 0\ns:\n    mov al, a[si]\n    mov ah, 0\n    add b, ax\n    inc si\n    loop s\n    mov ax, 4c00h\n    int 21h\ncode ends\nend start\n</code></pre> <p>\u4ee3\u7801\u662f\u4e0d\u662f\u53d8\u5f97\u7b80\u4ecb\u4e86\u4e00\u4e9b\uff1f</p>"},{"location":"lectures/lecture06/#_5","title":"\u5728\u5176\u4ed6\u6bb5\u4e2d\u4f7f\u7528\u6570\u636e\u6807\u53f7","text":"<p>\u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u4e0d\u5728\u4ee3\u7801\u6bb5\u5b9a\u4e49\u6570\u636e\uff0c\u800c\u662f\u5355\u72ec\u5b9a\u4e49\u5230\u5176\u4ed6\u6bb5\u4e2d\u3002</p> <p>\u6ce8\u610f\uff0c\u5e26\u201c:\u201d\u5730\u5740\u6807\u53f7\u53ea\u80fd\u5728\u4ee3\u7801\u6bb5\u4e2d\u4f7f\u7528\uff0c\u5728\u5176\u4ed6\u6bb5\u4e2d\u4f7f\u7528\u65e0\u6548\u3002</p> <p>\u5c06\u4e0a\u8ff0\u4ee3\u7801\u518d\u6b21\u6539\u5199\uff1a</p> <pre><code>assume cs:code, ds:data\n\ndata segment\na\n    db 1, 2, 3, 4, 5, 6, 7, 8\nb\n    dw 0\ndata ends\n\ncode segment\nstart:\n    mov ax, data\n    mov ds, ax\n\n    mov si, 0\n    mov cx, 8\ns:\n    mov al, a[si]\n    mov ah, 0\n    add b, ax\n    inc si\n    loop s\n\n    mov ax, 4c00h\n    int 21h\ncode ends\nend start\n</code></pre> <p>\u6ce8\u610f\uff0c\u5982\u679c\u60f3\u5728\u4ee3\u7801\u6bb5\u4e2d\u76f4\u63a5\u4f7f\u7528\u6570\u636e\u6807\u53f7\u8bbf\u95ee\u6570\u636e\uff0c\u5fc5\u987b\u4f7f\u7528\u4f2a\u6307\u4ee4 <code>assume</code> \u5c06\u6807\u53f7\u6240\u5728\u6bb5\u548c\u51e0\u4e2a\u6bb5\u5bc4\u5b58\u5668\u8054\u7cfb\u8d77\u6765\uff0c\u5426\u5219\u7f16\u8bd1\u5668\u65e0\u6cd5\u786e\u5b9a\u6bb5\u5730\u5740\u5728\u54ea\u4e2a\u6bb5\u5bc4\u5b58\u5668\u4e2d\u3002</p>"},{"location":"lectures/lecture06/#_6","title":"\u76f4\u63a5\u5b9a\u5740\u8868","text":"<p>\u4ec0\u4e48\u662f\u76f4\u63a5\u5b9a\u5740\u8868\uff1f\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u6620\u5c04\uff0c\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>data segment\n    db '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'\ndata ends\n</code></pre> <p>\u5982\u679c\u7ed9\u4f60 0 ~ 15 \u8303\u56f4\u5185\u968f\u673a\u4e00\u4e2a\u6570\u5b57\uff0c\u4f60\u80fd\u5426\u5c06\u5176\u5bf9\u5e94\u7684\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u5728\u663e\u793a\u5668\u4e2d\u663e\u793a\u51fa\u6765\uff1f\u5982\u679c\u6ca1\u6709\u4e0a\u8ff0\u6570\u636e\u7684\u5b9a\u4e49\uff0c\u4f60\u9700\u8981\u5224\u65ad\u7ed9\u5b9a\u7684\u6570\u5b57\u662f\u5426\u5c0f\u4e8e 10\uff0c\u7136\u540e\u5c06\u5176\u8f6c\u6362\u4e3a\u5bf9\u5e94\u7684\u5b57\u7b26\uff0c\u9700\u8981\u4e24\u5957\u8f6c\u6362\u516c\u5f0f\u3002\u4f46\u5982\u679c\u4f60\u5df2\u7ecf\u6709\u4e86\u4e0a\u8ff0\u6570\u636e\u7684\u5b9a\u4e49\uff0c\u4f60\u53ea\u9700\u8981\u5728\u7ed9\u5b9a\u6570\u5b57\u5bf9\u5e94\u7684\u5185\u5b58\u5355\u5143\u5904\u53d6\u5f97\u5b57\u7b26\u5373\u53ef\u3002\u8fd9\u5c31\u662f\u76f4\u63a5\u5b9a\u5740\u8868\u7684\u539f\u7406\uff0c\u4f7f\u7528\u9884\u5148\u5b9a\u4e49\u7684\u6570\u636e\u4ee3\u66ff\u590d\u6742\u7684\u8f6c\u6362\u516c\u5f0f\u3002</p>"},{"location":"lectures/lecture06/#bios","title":"\u7b2c\u5341\u4e03\u7ae0\uff1a\u4f7f\u7528 BIOS \u8fdb\u884c\u952e\u76d8\u8f93\u5165","text":"<p>\u5206\u6790\u4ee5\u4e0b\u7a0b\u5e8f\uff1a</p> <pre><code>assume cs:code\n\ncode segment\nstart:\n    mov ax, 0B800h\n    mov ds, ax\n\n    mov cx, 13\n    mov di, 0\ns:\n    mov ah, 0\n    int 16h\n    mov [di], al\n    add di, 2\n    loop s\n\n    mov ax, 4c00h\n    int 21h\ncode ends\nend start\n</code></pre> <p>16h \u53f7\u4e2d\u65ad\u5386\u7a0b\u7684 0 \u53f7\u670d\u52a1\u662f\u4ece\u8f93\u5165\u7f13\u51b2\u533a\u53d6\u56de\u4e00\u4e2a\u5b57\u7b26\uff0c<code>AH</code> \u4e2d\u5b58\u653e\u72b6\u6001\u7801\uff0c<code>AL</code> \u4e2d\u5b58\u653e ASCII \u7801\u3002</p>"}]}