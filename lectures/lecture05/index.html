
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../lecture04/">
      
      
        <link rel="next" href="../lecture06/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Lecture 5 - 张逸安</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="张逸安" class="md-header__button md-logo" aria-label="张逸安" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            张逸安
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lecture 5
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../about/" class="md-tabs__link">
        
  
  
    
  
  About

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../schedule/" class="md-tabs__link">
        
  
  
    
  
  Schedule

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../glossary/" class="md-tabs__link">
        
  
  
    
  
  Glossary

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../support/" class="md-tabs__link">
        
  
  
    
  
  Support

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../lecture01/" class="md-tabs__link">
          
  
  
  Teaching

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="张逸安" class="md-nav__button md-logo" aria-label="张逸安" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    张逸安
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    About
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../schedule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schedule
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Support
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Teaching
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Teaching
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lecture 1
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lecture 2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lecture 3
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lecture 4
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Lecture 5
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Lecture 5
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        第十一章：标志寄存器
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第十一章：标志寄存器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zf" class="md-nav__link">
    <span class="md-ellipsis">
      
        ZF
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pf" class="md-nav__link">
    <span class="md-ellipsis">
      
        PF
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sf" class="md-nav__link">
    <span class="md-ellipsis">
      
        SF
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cf" class="md-nav__link">
    <span class="md-ellipsis">
      
        CF
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#of" class="md-nav__link">
    <span class="md-ellipsis">
      
        OF
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc" class="md-nav__link">
    <span class="md-ellipsis">
      
        adc
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sbb" class="md-nav__link">
    <span class="md-ellipsis">
      
        sbb
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmp" class="md-nav__link">
    <span class="md-ellipsis">
      
        cmp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        条件转移指令
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#df" class="md-nav__link">
    <span class="md-ellipsis">
      
        DF
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pushf-popf" class="md-nav__link">
    <span class="md-ellipsis">
      
        pushf 和 popf
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        第十二章：内中断
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#int" class="md-nav__link">
    <span class="md-ellipsis">
      
        第十三章：int 指令
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        第十四章：端口
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第十四章：端口">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        端口读写
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shl-shr" class="md-nav__link">
    <span class="md-ellipsis">
      
        shl 和 shr
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lecture06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lecture 6
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        第十一章：标志寄存器
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第十一章：标志寄存器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zf" class="md-nav__link">
    <span class="md-ellipsis">
      
        ZF
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pf" class="md-nav__link">
    <span class="md-ellipsis">
      
        PF
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sf" class="md-nav__link">
    <span class="md-ellipsis">
      
        SF
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cf" class="md-nav__link">
    <span class="md-ellipsis">
      
        CF
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#of" class="md-nav__link">
    <span class="md-ellipsis">
      
        OF
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adc" class="md-nav__link">
    <span class="md-ellipsis">
      
        adc
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sbb" class="md-nav__link">
    <span class="md-ellipsis">
      
        sbb
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmp" class="md-nav__link">
    <span class="md-ellipsis">
      
        cmp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        条件转移指令
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#df" class="md-nav__link">
    <span class="md-ellipsis">
      
        DF
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pushf-popf" class="md-nav__link">
    <span class="md-ellipsis">
      
        pushf 和 popf
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        第十二章：内中断
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#int" class="md-nav__link">
    <span class="md-ellipsis">
      
        第十三章：int 指令
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        第十四章：端口
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第十四章：端口">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        端口读写
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shl-shr" class="md-nav__link">
    <span class="md-ellipsis">
      
        shl 和 shr
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="_1">汇编语言第五讲</h1>
<h2 id="_2">第十一章：标志寄存器</h2>
<p>8086 的标志寄存器 <code>flag</code> 有 16 位，其中存储的信息通常被称为 PSW（Program Status Word）。其他寄存器是用来存放数据的，而 <code>flag</code> 按位存储信息的，每一位都有专门的含义：</p>
<ul>
<li>
<p>0：CF，Carry Flag</p>
</li>
<li>
<p>2：PF，Parity Flag</p>
</li>
<li>
<p>4：AF，Auxiliary Carry Flag</p>
</li>
<li>
<p>6：ZF，Zero Flag</p>
</li>
<li>
<p>7：SF，Sign Flag</p>
</li>
<li>
<p>8：TF，Trap Flag</p>
</li>
<li>
<p>9：IF，Interrupt Enable Flag</p>
</li>
<li>
<p>10：DF，Direction Flag</p>
</li>
<li>
<p>11：OF，Overflow Flag</p>
</li>
</ul>
<p>除了上述位，其他位没有意义。</p>
<h3 id="zf"><code>ZF</code></h3>
<p>零标志位，记录相关指令执行后的结果是否为 0。如果为 0，<code>ZF</code> = 1；否则，<code>ZF</code> = 0。</p>
<p>分析以下代码：</p>
<pre><code>mov ax, 1
sub ax, 1
</code></pre>
<p>执行后，<code>AX</code> = 0，<code>ZF</code> = 1。</p>
<p>在 8086 CPU 的指令集中，有的指令的执行是影响标志寄存器的，比如 <code>add</code>、<code>sub</code>、<code>mul</code>、<code>div</code>、<code>inc</code>、<code>or</code>、<code>and</code> 等，大多为运算指令；有的指令的执行对标志寄存器没有影响，比如 <code>mov</code>、<code>push</code>、<code>pop</code> 等，它们大多为传送指令。</p>
<h3 id="pf"><code>PF</code></h3>
<p>奇偶标志位，记录相关指令执行后，其结果所有的 bit 位中 1 的个数是否为偶数。如果是则 <code>PF</code> = 1，否则 <code>PF</code> = 0。</p>
<p>分析以下代码：</p>
<pre><code>mov al, 1
or al, 2
</code></pre>
<p>执行后，<code>AL</code> = 00000011b，<code>PF</code> = 1。</p>
<h3 id="sf"><code>SF</code></h3>
<p>符号标志位，记录相关指令执行后，其结果是否为负。如果是则 <code>SF</code> = 1，否则 <code>SF</code> = 0。</p>
<p>分析以下代码：</p>
<pre><code>mov al, 01111111b
add al, 1
</code></pre>
<p>执行后，<code>AL</code> = 10000000b，<code>SF</code> = 1。</p>
<h3 id="cf"><code>CF</code></h3>
<p>进位标志位，记录相关指令执行后是否产生进位或借位。如果是则 <code>CF</code> = 1，否则 <code>CF</code> = 0。</p>
<p>分析以下代码：</p>
<pre><code>mov al, 11111111b
add al, 1
</code></pre>
<p>执行后，<code>AL</code> = 00000000b，<code>CF</code> = 1。</p>
<p>分析以下代码：</p>
<pre><code>mov al, 0
sub al, 1
</code></pre>
<p>执行后，<code>AL</code> = 11111111b，<code>CF</code> = 1。</p>
<h3 id="of"><code>OF</code></h3>
<p>溢出标志位，记录计算指令是否发生溢出。如：正 + 正 = 负。</p>
<p>注意区分 <code>CF</code> 和 <code>OF</code>，<code>CF</code> 考察的是虚拟的额外位，<code>OF</code> 考察的是实际的最高位。</p>
<p>分析以下代码：</p>
<pre><code>mov al, 98
add al, 99
</code></pre>
<p>执行后，<code>AL</code> &lt; 0，OF = 1。</p>
<h3 id="adc"><code>adc</code></h3>
<p>指令格式：</p>
<p><code>adc, obj1, obj2</code></p>
<p>作用：</p>
<p><code>obj1 = obj1 + obj2 + CF</code></p>
<p>为什么要有这么一条指令呢？分析以下代码：</p>
<pre><code>mov ax, 00ffh
mov bx, 1
add ax, bx

mov al, 0ffh
mov ah, 0
mov bx, 1
add al, bl
adc ah, bh
</code></pre>
<p>两段代码实现了相同的功能。拓展一下，16 位处理器处理 32 位数据的原理同上。</p>
<h3 id="sbb"><code>sbb</code></h3>
<p>指令格式：</p>
<p><code>sbb obj1, obj2</code></p>
<p>作用：</p>
<p><code>obj1 = obj1 - obj2 - CF</code></p>
<p>意义类似于 <code>adc</code>。</p>
<h3 id="cmp"><code>cmp</code></h3>
<p>指令格式：</p>
<p><code>cmp obj1, obj2</code></p>
<p>作用：</p>
<p><code>ZF = obj1 == obj2</code></p>
<p><code>cmp</code> 指令实际上在做减法运算，只是没有保存结果。</p>
<h3 id="_3">条件转移指令</h3>
<p>“条件”说的是根据某种条件决定是否跳转，比如 <code>jcxz</code> 就是根据 <code>CX</code> 是否为 0 来决定是否跳转。</p>
<p>下面是根据 <code>cmp</code> 指令的结果进行跳转的指令：</p>
<ul>
<li>
<p><code>je</code>：等于</p>
</li>
<li>
<p><code>jne</code>：不等于</p>
</li>
<li>
<p><code>jb</code>：小于</p>
</li>
<li>
<p><code>jnb</code>：不小于</p>
</li>
<li>
<p><code>ja</code>：大于</p>
</li>
<li>
<p><code>jna</code>：不大于</p>
</li>
</ul>
<p>这些指令的格式同 <code>jcxz</code>。</p>
<h3 id="df"><code>DF</code></h3>
<p>方向标志位，在传处理指令中，控制每次操作后 <code>SI</code>、<code>DI</code>的增减。</p>
<ul>
<li>
<p><code>DF = 0</code>：每次操作后 <code>SI</code>、<code>DI</code> 递增。</p>
</li>
<li>
<p><code>DF = 1</code>：每次操作后 <code>SI</code>、<code>DI</code> 递减。</p>
</li>
</ul>
<p>串传送指令：</p>
<p><code>movsb</code></p>
<p>功能：</p>
<pre><code>byte ptr ES:[DI] = byte ptr DS:[SI]
inc DI | dec DI
inc SI | dec SI
</code></pre>
<p><code>movsw</code></p>
<p>功能：</p>
<pre><code>word ptr ES:[DI] = word ptr DS:[SI]
add DI, 2 | sub DI, 2
add SI, 2 | sub SI, 2
</code></pre>
<p>以上指令和 <code>rep</code> 配合使用，功能为：</p>
<pre><code>s:
    movsb
    loop s
</code></pre>
<p>8086 提供了修改 <code>DF</code> 的指令：</p>
<ul>
<li>
<p><code>cld</code>：clear DF，将 <code>DF</code> 设置为 0</p>
</li>
<li>
<p><code>std</code>：set DF，将 <code>DF</code> 设置为 1</p>
</li>
</ul>
<p>分析以下代码：</p>
<pre><code>assume cs:code

data segment
    db 16 dup (0)
    db 16 dup (1)
data ends

code segment
    mov ax, data
    mov ds, ax
    mov si, 1fh
    mov ax, data
    mov es, ax
    mov di, 0fh
    mov cx, 16
    std
    rep movsb
code ends
</code></pre>
<h3 id="pushf-popf"><code>pushf</code> 和 <code>popf</code></h3>
<p><code>pushf</code> 的功能是将 <code>flag</code> 压栈，<code>popf</code> 是将 <code>flag</code> 弹栈。它们为访问标志寄存器提供了一种方法。</p>
<p>分析以下程序：</p>
<pre><code>mov ax, 0
push ax
popf
mov ax, 0fff0h
add ax, 0010h
pushf
pop ax
and al, 11000101b
and ah, 00001000b
</code></pre>
<p>执行后，<code>AX</code> 的值是多少？</p>
<h2 id="_4">第十二章：内中断</h2>
<p>首先解释一下什么是中断。当 CPU 在执行普通指令时，可能会出现意料之外的错误，如：执行除法时无法存放结果，这时 CPU 会中断指令的执行，跳到一段预先定义的特殊指令处执行相应的处理，这个过程就就叫中断。</p>
<p>分析以下代码：</p>
<pre><code>mov ax, 0ffffh
mov dx, 1
div dx
</code></pre>
<p>单步运行，查看程序如何运行。</p>
<p>出现在 CPU 内部的异常被称为内中断，与之相对，来自于外部的异常被称为外中断。</p>
<p>当 CPU 内部发生如下情况时会产生内中断：</p>
<ul>
<li>
<p><code>div</code> 溢出</p>
</li>
<li>
<p>单步执行</p>
</li>
<li>
<p>执行 <code>into</code> 指令</p>
</li>
<li>
<p>执行 <code>int</code> 指令</p>
</li>
</ul>
<p>我们已经演示了 <code>div</code> 溢出的情形，现在着重讲解 <code>int</code> 指令。</p>
<p><code>int</code> 指令已经在之前的程序中出现过：</p>
<pre><code>mov ax, 4c00h
int 21h
</code></pre>
<p>这是程序的正常返回语句。</p>
<p>指令格式：</p>
<p><code>int code</code></p>
<p>作用：</p>
<p>执行编号为 <code>code</code> 的中断处理程序。作为初学者，我们先不用管如何编写中断处理程序，只需要在合适的时候调用合适的中断代码即可。</p>
<h2 id="int">第十三章：<code>int</code> 指令</h2>
<p>这一章主要讲解如何编写和安装中断处理程序，如上述所言，在深入学习之前可以跳过。</p>
<h2 id="_5">第十四章：端口</h2>
<h3 id="_6">端口读写</h3>
<p>部分外设通过端口与 CPU 进行通讯，对于这部分设备有一对特殊的指令与其通讯：</p>
<p>端口地址：0 ~ 255</p>
<ul>
<li>
<p><code>in al, address</code></p>
</li>
<li>
<p><code>out address, al</code></p>
</li>
</ul>
<p>端口地址：255 ~ 65535</p>
<ul>
<li>
<p><code>mov dx, address</code></p>
</li>
<li>
<p><code>in al, dx</code></p>
</li>
<li>
<p><code>out dx, al</code></p>
</li>
</ul>
<p>简单了解即可。</p>
<h3 id="shl-shr"><code>shl</code> 和 <code>shr</code></h3>
<p><code>shl</code> 是逻辑左移指令，<code>shr</code> 是逻辑右移指令。</p>
<p>指令格式：</p>
<pre><code>shl al, 1

mov cl, idata
shl al, cl
</code></pre>
<p>作用：</p>
<p>将 <code>AL</code> 左移 1 位或 <code>CL</code> 位，末尾补 0，最高位被写入 <code>CF</code> 中。注意，<code>shl</code> 左移的位数大于 1 时只能放在 <code>CL</code> 中。</p>
<p><code>shr</code> 与 <code>shl</code> 相反，右移 1 位或 <code>CL</code> 位，高位补 0，最低为被写入 <code>CF</code> 中。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="mailto:2332309318@qq.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.395 15.035a40 40 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a39 39 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/tsincy-peacy" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../javascripts/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>